{"version":3,"sources":["utils/api.js","contexts/CurrentUserContext.js","components/Card.js","images/header-logo.svg","components/Header.js","components/Footer.js","components/Main.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/Input.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/PopupWithSubmit.js","components/InitialPageWithForm.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoToolTip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","statusText","token","fetch","then","_checkStatus","data","method","body","JSON","stringify","id","CurrentUserContext","React","createContext","Card","onCardClick","onCardLike","onCardDelete","card","currentUser","useContext","isLiked","likes","some","user","_id","isOwn","owner","cardLikeButtonClassName","cardDeleteButtonClassName","className","src","link","alt","name","onClick","type","aria-label","length","Header","buttonText","userEmail","endPoint","signOut","isBurgerMenuOpen","setIsBurgerMenuOpen","to","headerLogo","console","log","Footer","Main","onAddPlace","onEditAvatar","onEditProfile","cards","onLikeClick","onDeleteClick","style","backgroundImage","avatar","about","map","ImagePopup","isOpen","onClose","PopupWithForm","title","onSubmit","children","button","idSubmitted","action","disabled","EditAvatarPopup","onUpdateAvatar","isSubmitted","userAvatarRef","useRef","e","preventDefault","current","value","htmlFor","ref","placeholder","required","Input","props","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","maxLength","minLength","onChange","target","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","PopupWithSubmit","deleteCard","InitialPageWithForm","userSignUp","autoComplete","arial-lable","Login","handleLogin","email","password","userData","setUserData","handleChange","Register","handleRegister","confirmPassword","mix","colormodifier","ProtectedRoute","Component","component","isLoggedIn","InfoToolTip","authUserData","isSignedUp","message","tittle","BASE_URL","checkStatus","App","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isPopupWithSubmitOpen","setIsPopupWithSubmitOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setIsSubmitted","setCurrentUser","deletedCardData","setDeletedCardData","isInfoToolTipOpen","setIsInfoToolTipOpen","setIsLoggedIn","setIsSignedUp","setAuthUserData","setUserEmail","isShowPassword","setIsShowPassword","history","useHistory","getInitialCards","catch","err","getUserInfo","handleTokenCheck","localStorage","getItem","Authorization","auth","push","closeAllPopups","evt","handleClickClosePopup","classList","contains","handleEscClose","keyCode","document","addEventListener","removeEventListener","Provider","path","changeLikeCardStatus","newCard","items","item","removeItem","setTimeout","Accept","errorMessage","String","split","updateAvatar","Object","assign","updateUserData","addCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.88146587.chunk.js","sourcesContent":["class Api {\r\n    constructor({\r\n      baseUrl,\r\n      headers\r\n    }) {\r\n      this._baseUrl = baseUrl;\r\n      this._headers = headers;\r\n    }\r\n  \r\n    _checkStatus(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status} ${res.statusText}`);\r\n    }\r\n  \r\n    // getUserData() {\r\n    //   return fetch(`${this._baseUrl}/users/me`, {\r\n    //       headers: this._headers\r\n    //     })\r\n    //     .then(res => {\r\n    //       return this._checkStatus(res)\r\n    //     });\r\n    // }\r\n    getUserInfo(token) {\r\n      return fetch(`${this._baseUrl}/users/me`, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    // getInitialCards() {\r\n    //   return fetch(`${this._baseUrl}/cards`, {\r\n    //       method: 'GET',\r\n    //       headers: this._headers\r\n    //     })\r\n    //     .then(res => {\r\n    //       return this._checkStatus(res)\r\n    //     });\r\n    // }\r\n    getInitialCards(token) {\r\n      return fetch(`${this._baseUrl}/cards`, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    // updateUserData(data) {\r\n    //   return fetch(`${this._baseUrl}/users/me`, {\r\n    //       method: 'PATCH',\r\n    //       headers: this._headers,\r\n    //       body: JSON.stringify(data)\r\n    //     })\r\n    //     .then(res => {\r\n    //       return this._checkStatus(res)\r\n    //     });\r\n    // }\r\n    updateDataUser(data, token) {\r\n      return fetch(`${this._baseUrl}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(data),\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    // addCard(data) {\r\n    //   return fetch(`${this._baseUrl}/cards`, {\r\n    //       method: 'POST',\r\n    //       headers: this._headers,\r\n    //       body: JSON.stringify(data)\r\n    //     })\r\n    //     .then(res => {\r\n    //       return this._checkStatus(res)\r\n    //     });\r\n    // }\r\n    addNewCard(data, token) {\r\n      return fetch(`${this._baseUrl}/cards`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(data),\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    // deleteCard(id) {\r\n    //   return fetch(`${this._baseUrl}/cards/${id}`, {\r\n    //       method: 'DELETE',\r\n    //       headers: this._headers\r\n    //     })\r\n    //     .then(res => {\r\n    //       return this._checkStatus(res)\r\n    //     });\r\n    // }\r\n    deleteCard(id, token) {\r\n      return fetch(`${this._baseUrl}/cards/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    // updateAvatar(data) {\r\n    //   return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n    //       method: 'PATCH',\r\n    //       headers: this._headers,\r\n    //       body: JSON.stringify(data)\r\n    //     })\r\n    //     .then(res => {\r\n    //       return this._checkStatus(res)\r\n    //     });\r\n    // }\r\n    updateUserAvatar(data, token) {\r\n      return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(data),\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n  //   changeLikeCardStatus(id, cardIsLiked) {\r\n  //     return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n  //       method: cardIsLiked ? \"PUT\" : \"DELETE\",\r\n  //       headers: this._headers,\r\n  //     }).then((res) => this._checkStatus(res));\r\n  //   }\r\n  // }\r\n  likeCard(method, id, token) {\r\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\r\n      method: method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: \"https://api.mesto-full.nomoredomains.work\",\r\n});\r\n  export default api;","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();","import React, { useContext } from 'react';\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Card = ({ onCardClick, onCardLike, onCardDelete, card }) => {\r\n  const { currentUser } = useContext(CurrentUserContext);\r\n  const isLiked = card.likes.some((user) => user._id === currentUser._id);\r\n  const isOwn = card.owner._id === currentUser._id;\r\n   \r\n    const handleClick = () => {\r\n      onCardClick(card);\r\n    };\r\n    \r\n    const cardLikeButtonClassName = `list__like ${\r\n      isLiked ? \"list__like_active\" : \"\"\r\n    }`;\r\n\r\n    const handleLikeClick = () => {\r\n      onCardLike(card);\r\n    };\r\n    \r\n    const cardDeleteButtonClassName = `list__basket ${\r\n      isOwn ? \"\" : \"list__basket_inactive\"\r\n    }`;\r\n\r\n    const handleDeleteClick = () => {\r\n      onCardDelete(card);\r\n    };\r\n  \r\n    return (\r\n      <li className=\"list__element\">\r\n        <img\r\n          src={card && card.link}\r\n          alt={card && card.name}\r\n          className=\"list__image\"\r\n          onClick={handleClick}\r\n        />\r\n        <div className=\"list__group\">\r\n        <h2 className=\"list__name\">{card && card.name}</h2>\r\n          <button\r\n           className={cardLikeButtonClassName}\r\n           type=\"button\"\r\n           aria-label=\"Like\"\r\n           onClick={handleLikeClick}\r\n           >\r\n            <p className=\"list__likes-counter\">{card.likes ? card.likes.length : \"0\"}</p>\r\n          </button>\r\n          <button\r\n            className={cardDeleteButtonClassName}\r\n            type=\"button\"\r\n            aria-label=\"delete image\"\r\n            onClick={handleDeleteClick}\r\n            />\r\n        </div>\r\n      </li>\r\n    );\r\n  };\r\n  \r\n  export default Card;","export default __webpack_public_path__ + \"static/media/header-logo.bbe2a6ea.svg\";","import React, { useContext } from 'react';\r\nimport headerLogo from '../images/header-logo.svg';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Header = ({buttonText, userEmail, endPoint, signOut}) => {\r\n    const { isBurgerMenuOpen, setIsBurgerMenuOpen } =\r\n    useContext(CurrentUserContext);\r\n\r\n    //функция для открытия меню бургера\r\n    const handleMenuBurger = () => {\r\n      if (!isBurgerMenuOpen) {\r\n        setIsBurgerMenuOpen(true);\r\n        console.log(isBurgerMenuOpen);\r\n      } else {\r\n        setIsBurgerMenuOpen(false);\r\n        console.log(isBurgerMenuOpen);\r\n      }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <NavLink to=\"/main\" className=\"logo\">\r\n                <img src={headerLogo} alt=\"Логотип\" className=\"header__logo\" />\r\n            </NavLink>\r\n            <div\r\n        className={`header__burger ${isBurgerMenuOpen ? \"active\" : \"\"}`}\r\n        onClick={handleMenuBurger}\r\n      >\r\n        <span\r\n          className={`header__burger_span ${isBurgerMenuOpen ? \"active\" : \"\"}`}\r\n        />\r\n      </div>\r\n      <div className={`header__menu ${isBurgerMenuOpen ? \"active\" : \"\"}`}>\r\n        {userEmail && (\r\n          <p className={`header__item ${isBurgerMenuOpen ? \"active\" : \"\"}`}>\r\n            {userEmail}\r\n          </p>\r\n        )}\r\n        <p className={`header__item ${isBurgerMenuOpen ? \"active\" : \"\"}`}>\r\n          <NavLink className=\"header__link\" to={endPoint} onClick={signOut}>\r\n            {buttonText}\r\n          </NavLink>\r\n        </p>\r\n      </div>\r\n        </header>  \r\n    )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <footer className=\"footer\">\r\n        <p className=\"footer__text\">&copy; 2020 Mesto Russia</p>\r\n      </footer> \r\n    )\r\n}\r\n\r\nexport default Footer;","import React, { useContext } from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\n\r\nfunction Main({\r\n  onAddPlace,\r\n  onCardClick,\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  cards,\r\n  onLikeClick,\r\n  onDeleteClick,\r\n  signOut,\r\n  userEmail,\r\n}) {\r\n  const { currentUser } = useContext(CurrentUserContext);\r\n\r\n    return (\r\n    <>\r\n      <Header\r\n      userEmail={userEmail}\r\n      buttonText={\"Выйти\"}\r\n      endPoint={\"/sign-in\"}\r\n      signOut={signOut}\r\n    /> \r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <button\r\n         type=\"button\"\r\n         aria-label=\"profile__avatar\"\r\n         className=\"profile__avatar\"\r\n         style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n         onClick={onEditAvatar}\r\n        />\r\n        <div className=\"profile-info\">\r\n          <h1 className=\"profile-info__name\" id=\"name\">{currentUser.name}</h1>\r\n          <button className=\"profile-info__edit\" type=\"button\" aria-label=\"Edit\" onClick={onEditProfile}/>\r\n          <p className=\"profile-info__text\" id=\"job\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add\" aria-label=\"add profile\" onClick={onAddPlace}/>\r\n      </section>\r\n      <section className=\"elements\">\r\n        <ul className=\"list\">\r\n        {cards.map((card) => (\r\n            <Card\r\n              key={card._id}\r\n              card={card}\r\n              onCardClick={onCardClick}\r\n              onCardLike={onLikeClick}\r\n              onCardDelete={onDeleteClick}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n    <Footer />\r\n  </>\r\n    )\r\n}\r\n\r\nexport default Main;","import React from \"react\";\r\n\r\nconst ImagePopup = ({ isOpen, onClose, data }) => {\r\n  return (\r\n    <div className={`popup popup_type_image ${ isOpen ? \"popup_is-opened\" : \"\" }`}>\r\n      <div className=\"popup__content popup__content_image\" id=\"picture-popup\" onClick={onClose}>\r\n        <button className=\"popup__close\" type=\"button\" aria-label=\"close popupImage\" onClick={onClose}></button>\r\n        <img\r\n          src={data && data.link}\r\n          alt={data && data.name}\r\n          className=\"popup__imgPic\"\r\n        />\r\n        <h3 className=\"popup__imgText\">{data && data.name}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImagePopup;\r\n\r\n\r\n\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm({\r\n  name,\r\n  title,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  children,\r\n  button,\r\n  idSubmitted,\r\n}) {\r\n  return (\r\n    <div className={`popup ${\r\n      isOpen ? \"popup_is-opened\" : \"\"\r\n    }`}\r\n    id={`edit-${name}`}\r\n    onClick={onClose}>\r\n            <div className={`popup__content`}>\r\n                <button\r\n                 type=\"button\" \r\n                 aria-label=\"close popup\" \r\n                 className=\"popup__close\" \r\n                 onClick={onClose} \r\n                />\r\n                <h3 className=\"popup__title\">{title}</h3>\r\n                <form\r\n                 action=\"#\"\r\n                 id={`${name}`}\r\n                 name={`${name}`}\r\n                 className={`popup__form`}\r\n                 onSubmit={onSubmit}\r\n                 >\r\n                  {children}\r\n                    <button \r\n                    aria-label=\"submit form\"\r\n                    className=\"popup__submit popup__submit_disabled\"\r\n                    type=\"submit\" disabled={idSubmitted}>{button}</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React, { useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst EditAvatarPopup = ({ isOpen, onClose, onUpdateAvatar, isSubmitted }) => {\r\n  const userAvatarRef = useRef(\"\");\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (isSubmitted) {\r\n      return;\r\n    }\r\n\r\n    onUpdateAvatar({\r\n      avatar: userAvatarRef.current.value,\r\n    });\r\n\r\n    userAvatarRef.current.value = \"\";\r\n  };\r\n\r\n  \r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={\"user-avatar\"}\r\n      title={\"Обновить аватар\"}\r\n      button={!isSubmitted ? \"Сохранить\" : \"Сохранение\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      idSubmitted={isSubmitted}\r\n    >\r\n      <label className=\"popup__field\" htmlFor=\"avatar-link-input\">\r\n        <input\r\n          ref={userAvatarRef}\r\n          type=\"url\"\r\n          className=\"popup__input\"\r\n          id=\"avatar-link-input\"\r\n          name=\"avatarLinkInput\"\r\n          placeholder=\"Ссылка на изображение (обязательно)\"\r\n          required\r\n        />\r\n        <span className=\"form__input-error\" id=\"avatar-link-input-error\" />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditAvatarPopup;","import React from \"react\";\r\n\r\nconst Input = (props) => {\r\n  return (\r\n    <label className=\"popup__field\" htmlFor={`${props.id}-input`}>\r\n      <input {...props} className=\"popup__input\" id={`${props.id}-input`} />\r\n      <span className=\"popup__input-error\" id={`${props.id}-input-error`} />\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default Input;","import React, { useState, useEffect, useContext } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport Input from \"./Input\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst EditProfilePopup = ({ isOpen, onClose, onUpdateUser, isSubmitted }) => {\r\n  const { currentUser }  = useContext(CurrentUserContext);\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (isSubmitted) {\r\n      return;\r\n    }\r\n\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n  const handleChangeName = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleChangeDescription = (e) => {\r\n    setDescription(e.target.value);\r\n  };\r\n\r\n \r\n  return (\r\n    <PopupWithForm\r\n      name={\"user-profile\"}\r\n      title={\"Редактировать профиль\"}\r\n      button={!isSubmitted ? \"Сохранить\" : \"Сохранение\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      idSubmitted={isSubmitted}\r\n    >\r\n      <Input\r\n        type={\"text\"}\r\n        value={name || \"\"}\r\n        id={\"user-name\"}\r\n        name={\"userNameInput\"}\r\n        placeholder={\"Имя\"}\r\n        required={true}\r\n        maxLength={\"40\"}\r\n        minLength={\"2\"}\r\n        onChange={handleChangeName}\r\n      />\r\n\r\n      <Input\r\n        type={\"text\"}\r\n        value={description || \"\"}\r\n        id={\"user-job\"}\r\n        name={\"userNameInput\"}\r\n        placeholder={\"О себе\"}\r\n        required={true}\r\n        maxLength={\"200\"}\r\n        minLength={\"2\"}\r\n        onChange={handleChangeDescription}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditProfilePopup;","import React, { useEffect, useState } from \"react\";\r\nimport Input from \"./Input\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst AddPlacePopup = ({ isOpen, onClose, onAddPlace, isSubmitted }) => {\r\n  const [placeName, setPlaceName] = useState(\"\");\r\n  const [placeLink, setPlaceLink] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    if (!isSubmitted) {\r\n      setPlaceName(\"\");\r\n      setPlaceLink(\"\");\r\n    }\r\n  }, [isSubmitted]);\r\n\r\n  const handlePlaceLinkChange = (e) => {\r\n    setPlaceLink(e.target.value);\r\n  };\r\n\r\n  const handlePlaceNameChange = (e) => {\r\n    setPlaceName(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (isSubmitted) {\r\n      return;\r\n    }\r\n    onAddPlace({\r\n      name: placeName,\r\n      link: placeLink,\r\n    });\r\n  };\r\n\r\n    \r\n  return (\r\n    <PopupWithForm\r\n      name={\"user-card\"}\r\n      title={\"Новое место\"}\r\n      button={\"Создать\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      idSubmitted={isSubmitted}\r\n    >\r\n      <Input\r\n        type=\"text\"\r\n        value={placeName || \"\"}\r\n        id=\"place-name\"\r\n        placeholder=\"Название (обязательно)\"\r\n        name=\"placeNameInput\"\r\n        required={true}\r\n        maxLength=\"30\"\r\n        minLength=\"2\"\r\n        onChange={handlePlaceNameChange}\r\n      />\r\n      <Input\r\n        type=\"url\"\r\n        value={placeLink || \"\"}\r\n        id=\"place-link\"\r\n        placeholder=\"Ссылка на картинку (обязательно)\"\r\n        name=\"placeLinkInput\"\r\n        required={true}\r\n        onChange={handlePlaceLinkChange}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default AddPlacePopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst PopupWithSubmit = ({\r\n  isOpen,\r\n  onClose,\r\n  deleteCard,\r\n  isSubmitted,\r\n  data,\r\n}) => {\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (isSubmitted) {\r\n      return;\r\n    }\r\n\r\n    deleteCard(data);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={\"user-submit\"}\r\n      title={\"Вы уверены?\"}\r\n      button={!isSubmitted ? \"Да\" : \"Удаление\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      idSubmitted={isSubmitted}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PopupWithSubmit;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst InitialPageWithForm = ({\r\n  name,\r\n  title,\r\n  onSubmit,\r\n  children,\r\n  button,\r\n  isSubmitted,\r\n  userSignUp,\r\n}) => {\r\n  return (\r\n      <div className=\"login\">\r\n        <h2 className=\"login__title\">{title}</h2>\r\n        <form\r\n          className=\"login__form\"\r\n          id={`${name}`}\r\n          name={`${name}`}\r\n          autoComplete=\"off\"\r\n          onSubmit={onSubmit}\r\n        >\r\n          {children}\r\n          <button\r\n            arial-lable=\"Подтвердите действие пользователя\"\r\n            type=\"submit\"\r\n            className={`login__submit ${\r\n              isSubmitted ? \"login__submit_inactive\" : \"\"\r\n            }`}\r\n            disabled={isSubmitted}\r\n          >\r\n            {button}\r\n          </button>\r\n\r\n          {userSignUp && (\r\n            <div className=\"login__footer\">\r\n              <p className=\"login__subtitle\">Уже зарегистрированы?&nbsp;\r\n              <Link className=\"login__subtitle login__link\" to=\"/sign-in\">\r\n                {userSignUp}\r\n              </Link>\r\n              </p>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default InitialPageWithForm;","import React, { useState } from \"react\";\r\nimport Header from \"./Header\";\r\nimport InitialPageWithForm from \"./InitialPageWithForm\";\r\n\r\nconst Login = ({ handleLogin, isSubmitted }) => {\r\n  \r\n  const [userData, setUserData] = useState({ email: \"\", password: \"\" });\r\n\r\n  \r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  \r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!userData.email || !userData.password) {\r\n      return;\r\n    }\r\n\r\n    handleLogin(userData.password, userData.email);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        buttonText={\"Регистрация\"}\r\n        endPoint={\"/sign-up\"}\r\n      />\r\n\r\n      <InitialPageWithForm\r\n        name={\"user-sign-in\"}\r\n        title={\"Войти\"}\r\n        button={!isSubmitted ? \"Войти\" : \"Выполняется вход\"}\r\n        onSubmit={handleSubmit}\r\n        isSubmitted={isSubmitted}\r\n      >\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"email\"\r\n          value={userData.email}\r\n          id=\"email\"\r\n          placeholder=\"Email\"\r\n          name=\"email\"\r\n          required={true}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"password\"\r\n          value={userData.password}\r\n          id=\"password\"\r\n          placeholder=\"Пароль\"\r\n          name=\"password\"\r\n          required={true}\r\n          onChange={handleChange}\r\n        />\r\n      </InitialPageWithForm>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;","import React, { useState } from \"react\";\r\nimport Header from \"./Header\";\r\nimport InitialPageWithForm from \"./InitialPageWithForm\";\r\n\r\nconst Register = ({ handleRegister, isSubmitted }) => {\r\n  const [userData, setUserData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!userData.password || !userData.email) {\r\n      return;\r\n    }\r\n    handleRegister(userData.email, userData.password, userData.confirmPassword);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        mix={\"page__header section\"}\r\n        buttonText={\"Войти\"}\r\n        endPoint={\"/sign-in\"}\r\n      />\r\n      <InitialPageWithForm\r\n        name={\"user-sign-up\"}\r\n        title={\"Регистрация\"}\r\n        button={!isSubmitted ? \"Зарегистрироваться\" : \"Идет регистрация\"}\r\n        onSubmit={handleSubmit}\r\n        userSignUp={\"Войти\"}\r\n        isSubmitted={isSubmitted}\r\n      >\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"email\"\r\n          value={userData.email}\r\n          id=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          colormodifier={\"form__login-input\"}\r\n          required={true}\r\n          minLength=\"2\"\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"password\"\r\n          value={userData.password}\r\n          id=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Пароль\"\r\n          colormodifier={\"form__login-input\"}\r\n          required={true}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"password\"\r\n          value={userData.confirmPassword}\r\n          id=\"confirmPassword\"\r\n          name=\"confirmPassword\"\r\n          placeholder=\"Подтвердите пароль\"\r\n          colormodifier={\"form__login-input\"}\r\n          required={true}\r\n          onChange={handleChange}\r\n        />\r\n      </InitialPageWithForm>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  const { isLoggedIn } = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        isLoggedIn ? <Component {...props} /> : <Redirect to={props.to} />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;","import React, { useContext } from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst InfoToolTip = ({ isOpen, onClose, name }) => {\r\n  const { authUserData, isSignedUp } = useContext(CurrentUserContext);\r\n\r\n  // console.log(authUserData.message)\r\n  return (\r\n    <section\r\n      className={`popup ${\r\n        isOpen ? \"popup_is-opened\" : \"\"\r\n      }`}\r\n      id={`edit-${name}`}\r\n      onClick={onClose}\r\n    >\r\n      <div className=\"popup__content popup__content_size-s\">\r\n        <div\r\n          className={`popup__icon ${\r\n            isSignedUp\r\n              ? \"popup__icon_status_ok\"\r\n              : \"popup__icon_status_err\"\r\n          }`}\r\n        />\r\n        <h2 className=\"popup__title\">\r\n          {authUserData.message}\r\n        </h2>\r\n        <button\r\n          arial-lable=\"Закрыть форму без сохранения данных\"\r\n          tittle=\"Закрыть\"\r\n          type=\"button\"\r\n          className=\"popup__close\"\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default InfoToolTip;","export const BASE_URL = \"https://api.mesto-full.nomoredomains.work\";\r\n\r\nconst headers = {\r\n  \"Content-Type\": \"application/json\",\r\n};\r\nconst checkStatus = (res) => {\r\n  return res.ok\r\n    ? res.json()\r\n    : Promise.reject(`${res.status} ${res.statusText}`);\r\n};\r\n\r\n//регистрация\r\nexport const register = (password, email) => {\r\n  // console.log(password);\r\n  // console.log(email);\r\n  return (\r\n    fetch(`${BASE_URL}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        password: password,\r\n        email: email,\r\n      }),\r\n    })\r\n    .then((res) => {\r\n      return checkStatus(res);\r\n      })\r\n  );\r\n};\r\n\r\n//авторизация\r\n// export const authorize = (password, identifier) => {\r\n//   return fetch(`${BASE_URL}/signin`, {\r\n//     method: \"POST\",\r\n//     headers: {\r\n//       Accept: \"application/json\",\r\n//       \"Content-Type\": \"application/json\",\r\n//     },\r\n//     body: JSON.stringify({\r\n//       password: password,\r\n//       email: identifier,\r\n//     }),\r\n//   })\r\n//     .then((res) => checkStatus(res))\r\n//     .then((data) => {\r\n//       if (data.token) {\r\n//         localStorage.setItem(\"jwt\", data.token);\r\n//         return data;\r\n//       }\r\n//     });\r\n// };\r\nexport const login = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers,\r\n    body: JSON.stringify({ email, password }),\r\n  }).then((res) => {\r\n    return checkStatus(res);\r\n  });\r\n};\r\n\r\n//проверка валидности токена\r\n// export const checkToken = (token) => {\r\n//   return fetch(`${BASE_URL}/users/me`, {\r\n//     method: \"GET\",\r\n//     headers: {\r\n//       Accept: \"application/json\",\r\n//       \"Content-Type\": \"application/json\",\r\n//       Authorization: `Bearer ${token}`,\r\n//     },\r\n//   })\r\n//   .then((res) => {\r\n//     return checkStatus(res);\r\n//   });\r\n// };\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      ...headers,\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  }).then((res) => {\r\n    return checkStatus(res);\r\n  });\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport '../index.css';\r\nimport api from '../utils/api'\r\nimport Main from './Main';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport PopupWithSubmit from \"./PopupWithSubmit\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport { Switch, Route, Redirect, useHistory } from \"react-router-dom\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport InfoToolTip from \"./InfoToolTip\";\r\nimport * as auth from \"../utils/auth\";\r\n\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n  \r\n  const [cards, setCards] = useState([]);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isPopupWithSubmitOpen, setIsPopupWithSubmitOpen] = useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [deletedCardData, setDeletedCardData] = useState({});\r\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [isSignedUp, setIsSignedUp] = useState(false);\r\n  const [authUserData, setAuthUserData] = useState({});\r\n  const [userEmail, setUserEmail] = useState({});\r\n  const [isShowPassword, setIsShowPassword] = useState(false);\r\n  const [isBurgerMenuOpen, setIsBurgerMenuOpen] = useState(false);\r\n  const history = useHistory();\r\n  const ESC_KEYCODE = 27;\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    api\r\n      .getInitialCards()\r\n      .then((res) => {\r\n        setCards(res);\r\n        //console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Непредвиденная ошибка при загрузке карточек: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    api\r\n      .getUserInfo()\r\n      .then((userData) => {\r\n        setCurrentUser(userData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Непредвиденная ошибка при загрузке данных пользователя: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  }, []);\r\n\r\n  const handleAddCardSubmit = (newCard) => {\r\n    setIsSubmitted(true);\r\n\r\n    api\r\n      .addCard(newCard)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        setIsAddPlacePopupOpen(false);\r\n        setTimeout(() => setIsSubmitted(false), 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Непредвиденная ошибка при загрузки карточки пользователя: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n\r\n  const handleCardLike = (card) => {\r\n    const isLiked = card.likes.some((user) => user._id === currentUser._id);\r\n\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        setCards((items) =>\r\n          items.map((item) => (item._id === card._id ? newCard : item))\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Ошибка при установке лайка: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n\r\n  const handleCardDelete = (card) => {\r\n    setIsSubmitted(true);\r\n\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        setCards(cards.filter((item) => item._id !== card._id));\r\n        setIsPopupWithSubmitOpen(false);\r\n        setTimeout(() => setIsSubmitted(false), 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Ошибка при удалении карточки: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n\r\n  const handleAvatarUpdate = (data) => {\r\n    setIsSubmitted(true);\r\n\r\n    api\r\n      .updateAvatar(data)\r\n      .then((data) => {\r\n        setCurrentUser(Object.assign(currentUser, { avatar: data.avatar }));\r\n        setIsEditAvatarPopupOpen(false);\r\n        setTimeout(() => setIsSubmitted(false), 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Непредвиденная ошибка при загрузки изображения аватара: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n\r\n  const handleUserUpdate = (data) => {\r\n    setIsSubmitted(true);\r\n\r\n    api\r\n      .updateUserData(data)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        setIsEditProfilePopupOpen(false);\r\n        setTimeout(() => setIsSubmitted(false), 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Непредвиденная ошибка при передаче на сервер данных пользователя: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n\r\n\r\n\r\n  const handleRegister = (email, password, confirmPassword) => {\r\n    if (password === confirmPassword) {\r\n      setIsSubmitted(true);\r\n\r\n      auth\r\n        .register(password, email)\r\n        .then((res) => {\r\n          if (res) {\r\n            setAuthUserData({\r\n              ...authUserData,\r\n              message: \"Вы успешно зарегистрировались!\",\r\n            });\r\n            setIsInfoToolTipOpen(true);\r\n            setIsSignedUp(true);\r\n            setIsShowPassword(false);\r\n            history.push(\"/sign-in\");\r\n          } else {\r\n            setAuthUserData({\r\n              ...authUserData,\r\n              message: \"Что-то пошло не так! Попробуйте еще раз.\",\r\n            });\r\n            setIsInfoToolTipOpen(true);\r\n            setIsSignedUp(false);\r\n            setIsShowPassword(false);\r\n            setIsSubmitted(false);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          const errorMessage = String(err);\r\n          console.log(\r\n            `Ошибка регистрации пользователя: ${errorMessage.split(\":\")[1]}`\r\n          );\r\n\r\n          setAuthUserData({\r\n            ...authUserData,\r\n            message: `${errorMessage.split(\":\")[1]}!`,\r\n          });\r\n          setIsInfoToolTipOpen(true);\r\n          setIsSignedUp(false);\r\n          setTimeout(() => setIsSubmitted(false), 3000);\r\n        });\r\n    } else {\r\n      setAuthUserData({\r\n        ...authUserData,\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n        message: \"Пароли не совпадают! Попробуйте еще раз\",\r\n      });\r\n      setIsSignedUp(false);\r\n      setIsShowPassword(false);\r\n      setIsInfoToolTipOpen(true);\r\n    }\r\n\r\n    setTimeout(() => setIsSubmitted(false), 2000);\r\n  };\r\n\r\n\r\n  const handleLogin = (password, email) => {\r\n    setIsSubmitted(true);\r\n\r\n    auth\r\n      .login(password, email)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          setAuthUserData({\r\n            ...authUserData,\r\n            email: \"\",\r\n            password: \"\",\r\n          });\r\n          setIsLoggedIn(true);\r\n          setUserEmail(email);\r\n          setIsShowPassword(false);\r\n          history.push(\"/main\");\r\n          setTimeout(() => setIsSubmitted(false), 3000);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка авторизации пользователя: ${err.status}`);\r\n        setAuthUserData({\r\n          ...authUserData,\r\n          message: `Ошибка авторизации пользователя: Неверный логин или пароль! Попробуйте еще раз.`,\r\n        });\r\n        setIsLoggedIn(false);\r\n        setIsInfoToolTipOpen(true);\r\n        setIsSubmitted(false);\r\n        setIsShowPassword(false);\r\n        setUserEmail({});\r\n      });\r\n    setTimeout(() => setIsSubmitted(false), 2000);\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleTokenCheck();\r\n  }, [history]);\r\n\r\n  const handleTokenCheck = () => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n\r\n    if (token) {\r\n      auth\r\n        .getContent(token)\r\n        .then((res) => {\r\n          const { data } = res;\r\n          setUserEmail(data.email);\r\n          setIsLoggedIn(true);\r\n          history.push(\"/main\");\r\n        })\r\n        .catch((err) => {\r\n          console.log(`Ошибка при проверке токена:${err}`)\r\n          history.push(\"/sign-in\")\r\n          setAuthUserData({\r\n            ...authUserData,\r\n            message: `Ошибка авторизации пользователя. Пожалуйста, войдите под своей учетной записью`,\r\n          });\r\n          setIsInfoToolTipOpen(true);\r\n        });\r\n    }\r\n  };\r\n\r\n  const signOut = () => {\r\n    setIsLoggedIn(false);\r\n    localStorage.removeItem(\"jwt\");\r\n    setUserEmail({});\r\n    history.push(\"/sign-in\");\r\n  };\r\n\r\n  const closeAllPopups = (evt) => {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n    setIsInfoToolTipOpen(false);\r\n  };\r\n\r\n  const handleClickClosePopup = (e) => {\r\n    if (\r\n      e.target.classList.contains(\"popup\") ||\r\n      e.target.classList.contains(\"popup__close\")\r\n    ) {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  const handleEscClose = (e) => {\r\n    if (e.keyCode === ESC_KEYCODE) {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  const handleCardClick = (value) => {\r\n    setIsImagePopupOpen(true);\r\n    setSelectedCard(value);\r\n  };\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true);\r\n  };\r\n\r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true);\r\n  };\r\n\r\n  const handlePopupWithForm = (data) => {\r\n    setIsPopupWithSubmitOpen(true);\r\n    setDeletedCardData(data);\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isEditProfilePopupOpen ||\r\n      isAddPlacePopupOpen ||\r\n      isEditAvatarPopupOpen ||\r\n      isImagePopupOpen ||\r\n      isPopupWithSubmitOpen\r\n    ) {\r\n      document.addEventListener(\"keydown\", handleEscClose);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEscClose);\r\n    };\r\n  }, [\r\n    isEditProfilePopupOpen,\r\n    isAddPlacePopupOpen,\r\n    isEditAvatarPopupOpen,\r\n    isImagePopupOpen,\r\n    isPopupWithSubmitOpen,\r\n  ]);\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n  <CurrentUserContext.Provider \r\n    value={{\r\n     currentUser,\r\n     authUserData,\r\n     isLoggedIn,\r\n     setIsShowPassword,\r\n     isShowPassword,\r\n     isSignedUp,\r\n     isBurgerMenuOpen,\r\n     setIsBurgerMenuOpen,\r\n    }}\r\n    >\r\n    <div className=\"page\">\r\n    <Switch>\r\n      <ProtectedRoute\r\n        path=\"/main\"\r\n        component={Main}\r\n        onEditProfile={handleEditProfileClick}\r\n        onEditAvatar={handleEditAvatarClick}\r\n        onAddPlace={handleAddPlaceClick}\r\n        onCardClick={handleCardClick}\r\n        cards={cards}\r\n        onLikeClick={handleCardLike}\r\n        onDeleteClick={handlePopupWithForm}\r\n        signOut={signOut}\r\n        to={\"/sign-in\"}\r\n        userEmail={userEmail}\r\n      />\r\n      <Route path=\"/sign-in\">\r\n        <Login handleLogin={handleLogin} isSubmitted={isSubmitted} />\r\n      </Route>\r\n      <Route path=\"/sign-up\">\r\n        <Register\r\n          handleRegister={handleRegister}\r\n          isSubmitted={isSubmitted}\r\n        />  \r\n      </Route>\r\n      <Route path=\"/\">\r\n        {isLoggedIn ? (\r\n          <Redirect to=\"/main\" />\r\n        ) : (\r\n          <Redirect to=\"/signin\" />\r\n        )}\r\n      </Route>\r\n    </Switch>\r\n        \r\n    <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={handleClickClosePopup}\r\n          onUpdateAvatar={handleAvatarUpdate}\r\n          isSubmitted={isSubmitted}\r\n        />\r\n\r\n    <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={handleClickClosePopup}\r\n          onUpdateUser={handleUserUpdate}\r\n          isSubmitted={isSubmitted}\r\n        />\r\n\r\n    <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={handleClickClosePopup}\r\n          onAddPlace={handleAddCardSubmit}\r\n          isSubmitted={isSubmitted}\r\n        />    \r\n\r\n    <ImagePopup\r\n          isOpen={isImagePopupOpen}\r\n          data={selectedCard}\r\n          onClose={handleClickClosePopup}\r\n        />\r\n    <PopupWithSubmit\r\n          isOpen={isPopupWithSubmitOpen}\r\n          onClose={handleClickClosePopup}\r\n          isSubmitted={isSubmitted}\r\n          deleteCard={handleCardDelete}\r\n          data={deletedCardData}\r\n        />\r\n    <InfoToolTip\r\n          isOpen={isInfoToolTipOpen}\r\n          onClose={handleClickClosePopup}\r\n          name={\"infoToolTip\"}\r\n        />\r\n\r\n    </div>\r\n  </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n   <BrowserRouter> \r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}