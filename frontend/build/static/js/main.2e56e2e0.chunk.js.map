{"version":3,"sources":["utils/api.js","contexts/CurrentUserContext.js","components/Card.js","images/header-logo.svg","components/Header.js","components/Footer.js","components/Main.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditAvatarPopup.js","hooks/useFormValidator.js","components/Input.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/PopupWithSubmit.js","components/InitialPageWithForm.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoToolTip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","statusText","token","fetch","then","_checkStatus","data","method","body","JSON","stringify","id","CurrentUserContext","React","createContext","Card","onCardClick","onCardLike","onCardDelete","card","currentUser","useContext","isLiked","likes","some","user","_id","isOwn","owner","cardLikeButtonClassName","cardDeleteButtonClassName","className","src","link","alt","name","onClick","type","aria-label","length","Header","buttonText","userEmail","endPoint","signOut","isBurgerMenuOpen","setIsBurgerMenuOpen","to","headerLogo","console","log","Footer","Main","onAddPlace","onEditAvatar","onEditProfile","cards","onLikeClick","onDeleteClick","style","backgroundImage","avatar","about","map","ImagePopup","isOpen","onClose","PopupWithForm","title","onSubmit","children","button","idSubmitted","action","disabled","EditAvatarPopup","onUpdateAvatar","isSubmitted","currentFormValidator","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newErrors","newIsValid","handleChange","e","target","value","validationMessage","closest","checkValidity","useFormValidator","useEffect","preventDefault","htmlFor","placeholder","required","Input","props","EditProfilePopup","onUpdateUser","setName","description","setDescription","maxLength","minLength","onChange","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","PopupWithSubmit","deleteCard","InitialPageWithForm","userSignUp","autoComplete","arial-lable","Login","onLogin","email","password","userData","setUserData","Register","handleRegister","confirmPassword","mix","colormodifier","ProtectedRoute","Component","component","isLoggedIn","InfoToolTip","authUserData","isSignedUp","message","tittle","BASE_URL","checkStatus","getContent","Authorization","App","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isPopupWithSubmitOpen","setIsPopupWithSubmitOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setIsSubmitted","setCurrentUser","deletedCardData","setDeletedCardData","isInfoToolTipOpen","setIsInfoToolTipOpen","setIsLoggedIn","setIsSignedUp","setAuthUserData","setUserEmail","isShowPassword","setIsShowPassword","setErrorMessage","setStatusRegister","history","useHistory","showErrorMessage","error","setTimeout","jwt","localStorage","getItem","push","getUserInfo","getInitialCards","catch","err","handleTokenCheck","auth","closeAllPopups","evt","handleClickClosePopup","classList","contains","handleEscClose","keyCode","document","addEventListener","removeEventListener","Provider","path","likeCard","newCard","items","item","removeItem","Accept","login","setItem","errorMessage","String","split","updateUserAvatar","Object","assign","updateDataUser","addNewCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2e56e2e0.chunk.js","sourcesContent":["class Api {\r\n    constructor({\r\n      baseUrl,\r\n      headers\r\n    }) {\r\n      this._baseUrl = baseUrl;\r\n      this._headers = headers;\r\n    }\r\n  \r\n    _checkStatus(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status} ${res.statusText}`);\r\n    }\r\n    \r\n    getUserInfo(token) {\r\n      return fetch(`${this._baseUrl}/users/me`, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    getInitialCards(token) {\r\n      return fetch(`${this._baseUrl}/cards`, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    updateDataUser(data, token) {\r\n      return fetch(`${this._baseUrl}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(data),\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    addNewCard(data, token) {\r\n      return fetch(`${this._baseUrl}/cards`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(data),\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    deleteCard(id, token) {\r\n      return fetch(`${this._baseUrl}/cards/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n    updateUserAvatar(data, token) {\r\n      return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(data),\r\n      }).then((res) => {\r\n        return this._checkStatus(res);\r\n      });\r\n    }\r\n\r\n  likeCard(method, id, token) {\r\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\r\n      method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: \"https://api.mesto-full.nomoredomains.work\",\r\n});\r\n  export default api;","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();","import React, { useContext } from 'react';\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Card = ({ onCardClick, onCardLike, onCardDelete, card }) => {\r\n  const { currentUser } = useContext(CurrentUserContext);\r\n  //console.log(card.likes, currentUser);\r\n  const isLiked = card.likes.some((user) => user === currentUser._id);\r\n  const isOwn = card.owner._id === currentUser._id;\r\n   \r\n    const handleClick = () => {\r\n      onCardClick(card);\r\n    };\r\n    \r\n    const cardLikeButtonClassName = `list__like ${\r\n      isLiked ? \"list__like_active\" : \"\"\r\n    }`;\r\n\r\n    const handleLikeClick = () => {\r\n      onCardLike(card);\r\n    };\r\n    \r\n    const cardDeleteButtonClassName = `list__basket ${\r\n      isOwn ? \"\" : \"list__basket_inactive\"\r\n    }`;\r\n\r\n    const handleDeleteClick = () => {\r\n      onCardDelete(card);\r\n    };\r\n  \r\n    return (\r\n      <li className=\"list__element\">\r\n        <img\r\n          src={card && card.link}\r\n          alt={card && card.name}\r\n          className=\"list__image\"\r\n          onClick={handleClick}\r\n        />\r\n        <div className=\"list__group\">\r\n        <h2 className=\"list__name\">{card && card.name}</h2>\r\n          <button\r\n           className={cardLikeButtonClassName}\r\n           type=\"button\"\r\n           aria-label=\"Like\"\r\n           onClick={handleLikeClick}\r\n           >\r\n            <p className=\"list__likes-counter\">{card.likes ? card.likes.length : \"0\"}</p>\r\n          </button>\r\n          <button\r\n            className={cardDeleteButtonClassName}\r\n            type=\"button\"\r\n            aria-label=\"delete image\"\r\n            onClick={handleDeleteClick}\r\n            />\r\n        </div>\r\n      </li>\r\n    );\r\n  };\r\n  \r\n  export default Card;","export default __webpack_public_path__ + \"static/media/header-logo.bbe2a6ea.svg\";","import React, { useContext } from 'react';\r\nimport headerLogo from '../images/header-logo.svg';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Header = ({buttonText, userEmail, endPoint, signOut}) => {\r\n    const { isBurgerMenuOpen, setIsBurgerMenuOpen } =\r\n    useContext(CurrentUserContext);\r\n\r\n    //функция для открытия меню бургера\r\n    const handleMenuBurger = () => {\r\n      if (!isBurgerMenuOpen) {\r\n        setIsBurgerMenuOpen(true);\r\n        console.log(isBurgerMenuOpen);\r\n      } else {\r\n        setIsBurgerMenuOpen(false);\r\n        console.log(isBurgerMenuOpen);\r\n      }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <NavLink to=\"/main\" className=\"logo\">\r\n                <img src={headerLogo} alt=\"Логотип\" className=\"header__logo\" />\r\n            </NavLink>\r\n            <div\r\n        className={`header__burger ${isBurgerMenuOpen ? \"active\" : \"\"}`}\r\n        onClick={handleMenuBurger}\r\n      >\r\n        <span\r\n          className={`header__burger_span ${isBurgerMenuOpen ? \"active\" : \"\"}`}\r\n        />\r\n      </div>\r\n      <div className={`header__menu ${isBurgerMenuOpen ? \"active\" : \"\"}`}>\r\n        {userEmail && (\r\n          <p className={`header__item ${isBurgerMenuOpen ? \"active\" : \"\"}`}>\r\n            {userEmail}\r\n          </p>\r\n        )}\r\n        <p className={`header__item ${isBurgerMenuOpen ? \"active\" : \"\"}`}>\r\n          <NavLink className=\"header__link\" to={endPoint} onClick={signOut}>\r\n            {buttonText}\r\n          </NavLink>\r\n        </p>\r\n      </div>\r\n        </header>  \r\n    )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <footer className=\"footer\">\r\n        <p className=\"footer__text\">&copy; 2020 Mesto Russia</p>\r\n      </footer> \r\n    )\r\n}\r\n\r\nexport default Footer;","import React, { useContext } from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\n\r\nfunction Main({\r\n  onAddPlace,\r\n  onCardClick,\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  cards,\r\n  onLikeClick,\r\n  onDeleteClick,\r\n  signOut,\r\n  userEmail,\r\n}) {\r\n  const { currentUser } = useContext(CurrentUserContext);\r\n\r\n    return (\r\n    <>\r\n      <Header\r\n      userEmail={userEmail}\r\n      buttonText={\"Выйти\"}\r\n      endPoint={\"/sign-in\"}\r\n      signOut={signOut}\r\n    /> \r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <button\r\n         type=\"button\"\r\n         aria-label=\"profile__avatar\"\r\n         className=\"profile__avatar\"\r\n         style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n         onClick={onEditAvatar}\r\n        />\r\n        <div className=\"profile-info\">\r\n          <h1 className=\"profile-info__name\" id=\"name\">{currentUser.name}</h1>\r\n          <button className=\"profile-info__edit\" type=\"button\" aria-label=\"Edit\" onClick={onEditProfile}/>\r\n          <p className=\"profile-info__text\" id=\"job\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add\" aria-label=\"add profile\" onClick={onAddPlace}/>\r\n      </section>\r\n      <section className=\"elements\">\r\n        <ul className=\"list\">\r\n        {cards.map((card) => (\r\n            <Card\r\n              key={card._id}\r\n              card={card}\r\n              onCardClick={onCardClick}\r\n              onCardLike={onLikeClick}\r\n              onCardDelete={onDeleteClick}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n    <Footer />\r\n  </>\r\n    )\r\n}\r\n\r\nexport default Main;","import React from \"react\";\r\n\r\nconst ImagePopup = ({ isOpen, onClose, data }) => {\r\n  return (\r\n    <div className={`popup popup_type_image ${ isOpen ? \"popup_is-opened\" : \"\" }`}>\r\n      <div className=\"popup__content popup__content_image\" id=\"picture-popup\" onClick={onClose}>\r\n        <button className=\"popup__close\" type=\"button\" aria-label=\"close popupImage\" onClick={onClose}></button>\r\n        <img\r\n          src={data && data.link}\r\n          alt={data && data.name}\r\n          className=\"popup__imgPic\"\r\n        />\r\n        <h3 className=\"popup__imgText\">{data && data.name}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImagePopup;\r\n\r\n\r\n\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm({\r\n  name,\r\n  title,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  children,\r\n  button,\r\n  idSubmitted,\r\n}) {\r\n  return (\r\n    <div className={`popup ${\r\n      isOpen ? \"popup_is-opened\" : \"\"\r\n    }`}\r\n    id={`edit-${name}`}\r\n    onClick={onClose}>\r\n            <div className={`popup__content`}>\r\n                <button\r\n                 type=\"button\" \r\n                 aria-label=\"close popup\" \r\n                 className=\"popup__close\" \r\n                 onClick={onClose} \r\n                />\r\n                <h3 className=\"popup__title\">{title}</h3>\r\n                <form\r\n                 action=\"#\"\r\n                 id={`${name}`}\r\n                 name={`${name}`}\r\n                 className={`popup__form`}\r\n                 onSubmit={onSubmit}\r\n                 >\r\n                  {children}\r\n                    <button \r\n                    aria-label=\"submit form\"\r\n                    className=\"popup__submit popup__submit_disabled\"\r\n                    type=\"submit\" disabled={idSubmitted}>{button}</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React, { useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport useFormValidator from \"../hooks/useFormValidator\";\r\n\r\nconst EditAvatarPopup = ({ isOpen, onClose, onUpdateAvatar, isSubmitted }) => {\r\n  const currentFormValidator = useFormValidator();\r\n\r\n  useEffect(() => {\r\n    currentFormValidator.resetForm();\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: currentFormValidator.values.link,\r\n    });\r\n  }\r\n  \r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={\"user-avatar\"}\r\n      title={\"Обновить аватар\"}\r\n      button={!isSubmitted ? \"Сохранить\" : \"Сохранение\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      idSubmitted={isSubmitted}\r\n    >\r\n      <label className=\"popup__field\" htmlFor=\"avatar-link-input\">\r\n        <input\r\n          type=\"url\"\r\n          className=\"popup__input\"\r\n          id=\"avatar-link-input\"\r\n          name=\"link\"\r\n          placeholder=\"Ссылка на изображение (обязательно)\"\r\n          required\r\n        />\r\n        <span className=\"form__input-error\" id=\"avatar-link-input-error\" />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditAvatarPopup;","import { useState, useCallback } from \"react\";\r\n\r\nexport default function useFormValidator() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: e.target.validationMessage });\r\n    setIsValid(e.target.closest(\"form\").checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return {\r\n    values,\r\n    handleChange,\r\n    errors,\r\n    isValid,\r\n    resetForm,\r\n    setValues,\r\n    setIsValid,\r\n  };\r\n}\r\n","import React from \"react\";\r\n\r\nconst Input = (props) => {\r\n  return (\r\n    <label className=\"popup__field\" htmlFor={`${props.id}-input`}>\r\n      <input {...props} className=\"popup__input\" id={`${props.id}-input`} />\r\n      <span className=\"popup__input-error\" id={`${props.id}-input-error`} />\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default Input;","import React, { useState, useEffect, useContext } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport Input from \"./Input\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst EditProfilePopup = ({ isOpen, onClose, onUpdateUser, isSubmitted }) => {\r\n  const { currentUser }  = useContext(CurrentUserContext);\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (isSubmitted) {\r\n      return;\r\n    }\r\n\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n  const handleChangeName = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleChangeDescription = (e) => {\r\n    setDescription(e.target.value);\r\n  };\r\n\r\n \r\n  return (\r\n    <PopupWithForm\r\n      name={\"user-profile\"}\r\n      title={\"Редактировать профиль\"}\r\n      button={!isSubmitted ? \"Сохранить\" : \"Сохранение\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      idSubmitted={isSubmitted}\r\n    >\r\n      <Input\r\n        type={\"text\"}\r\n        value={name || \"\"}\r\n        id={\"user-name\"}\r\n        name={\"userNameInput\"}\r\n        placeholder={\"Имя\"}\r\n        required={true}\r\n        maxLength={\"40\"}\r\n        minLength={\"2\"}\r\n        onChange={handleChangeName}\r\n      />\r\n\r\n      <Input\r\n        type={\"text\"}\r\n        value={description || \"\"}\r\n        id={\"user-job\"}\r\n        name={\"userNameInput\"}\r\n        placeholder={\"О себе\"}\r\n        required={true}\r\n        maxLength={\"200\"}\r\n        minLength={\"2\"}\r\n        onChange={handleChangeDescription}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditProfilePopup;","import React, { useEffect, useState } from \"react\";\r\nimport Input from \"./Input\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst AddPlacePopup = ({ isOpen, onClose, onAddPlace, isSubmitted }) => {\r\n  const [placeName, setPlaceName] = useState(\"\");\r\n  const [placeLink, setPlaceLink] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!isSubmitted) {\r\n      setPlaceName(\"\");\r\n      setPlaceLink(\"\");\r\n    }\r\n  }, [isSubmitted]);\r\n\r\n  const handlePlaceLinkChange = (e) => {\r\n    setPlaceLink(e.target.value);\r\n  };\r\n\r\n  const handlePlaceNameChange = (e) => {\r\n    setPlaceName(e.target.value);\r\n  };\r\n\r\n  // const handleSubmit = (e) => {\r\n  //   e.preventDefault();\r\n  //   if (isSubmitted) {\r\n  //     return;\r\n  //   }\r\n  //   onAddPlace({\r\n  //     name: placeName,\r\n  //     link: placeLink,\r\n  //   });\r\n  // };\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({\r\n      name: placeName,\r\n      link: placeLink,\r\n    });\r\n  }\r\n    \r\n  return (\r\n    <PopupWithForm\r\n      name={\"user-card\"}\r\n      title={\"Новое место\"}\r\n      button={\"Создать\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      idSubmitted={isSubmitted}\r\n    >\r\n      <Input\r\n        type=\"text\"\r\n        value={placeName || \"\"}\r\n        id=\"place-name\"\r\n        placeholder=\"Название (обязательно)\"\r\n        name=\"placeNameInput\"\r\n        required={true}\r\n        maxLength=\"30\"\r\n        minLength=\"2\"\r\n        onChange={handlePlaceNameChange}\r\n      />\r\n      <Input\r\n        type=\"url\"\r\n        value={placeLink || \"\"}\r\n        id=\"place-link\"\r\n        placeholder=\"Ссылка на картинку (обязательно)\"\r\n        name=\"placeLinkInput\"\r\n        required={true}\r\n        onChange={handlePlaceLinkChange}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default AddPlacePopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst PopupWithSubmit = ({\r\n  isOpen,\r\n  onClose,\r\n  deleteCard,\r\n  isSubmitted,\r\n  data,\r\n}) => {\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (isSubmitted) {\r\n      return;\r\n    }\r\n\r\n    deleteCard(data);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={\"user-submit\"}\r\n      title={\"Вы уверены?\"}\r\n      button={!isSubmitted ? \"Да\" : \"Удаление\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      idSubmitted={isSubmitted}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PopupWithSubmit;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst InitialPageWithForm = ({\r\n  name,\r\n  title,\r\n  onSubmit,\r\n  children,\r\n  button,\r\n  isSubmitted,\r\n  userSignUp,\r\n}) => {\r\n  return (\r\n      <div className=\"login\">\r\n        <h2 className=\"login__title\">{title}</h2>\r\n        <form\r\n          className=\"login__form\"\r\n          id={`${name}`}\r\n          name={`${name}`}\r\n          autoComplete=\"off\"\r\n          onSubmit={onSubmit}\r\n        >\r\n          {children}\r\n          <button\r\n            arial-lable=\"Подтвердите действие пользователя\"\r\n            type=\"submit\"\r\n            className={`login__submit ${\r\n              isSubmitted ? \"login__submit_inactive\" : \"\"\r\n            }`}\r\n            disabled={isSubmitted}\r\n          >\r\n            {button}\r\n          </button>\r\n\r\n          {userSignUp && (\r\n            <div className=\"login__footer\">\r\n              <p className=\"login__subtitle\">Уже зарегистрированы?&nbsp;\r\n              <Link className=\"login__subtitle login__link\" to=\"/sign-in\">\r\n                {userSignUp}\r\n              </Link>\r\n              </p>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default InitialPageWithForm;","import React, { useState } from \"react\";\r\nimport Header from \"./Header\";\r\nimport InitialPageWithForm from \"./InitialPageWithForm\";\r\n\r\nconst Login = ({ onLogin, isSubmitted }) => {\r\n  \r\n  const [userData, setUserData] = useState({ email: \"\", password: \"\" });\r\n\r\n  \r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  \r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!userData.email || !userData.password) {\r\n      return;\r\n    }\r\n\r\n    //handleLogin(userData.password, userData.email);\r\n    onLogin(userData.email, userData.password);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        buttonText={\"Регистрация\"}\r\n        endPoint={\"/sign-up\"}\r\n      />\r\n\r\n      <InitialPageWithForm\r\n        name={\"user-sign-in\"}\r\n        title={\"Войти\"}\r\n        button={!isSubmitted ? \"Войти\" : \"Выполняется вход\"}\r\n        onSubmit={handleSubmit}\r\n        isSubmitted={isSubmitted}\r\n      >\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"email\"\r\n          value={userData.email}\r\n          id=\"email\"\r\n          placeholder=\"Email\"\r\n          name=\"email\"\r\n          required={true}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"password\"\r\n          value={userData.password}\r\n          id=\"password\"\r\n          placeholder=\"Пароль\"\r\n          name=\"password\"\r\n          required={true}\r\n          onChange={handleChange}\r\n        />\r\n      </InitialPageWithForm>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;","import React, { useState } from \"react\";\r\nimport Header from \"./Header\";\r\nimport InitialPageWithForm from \"./InitialPageWithForm\";\r\n\r\nconst Register = ({ handleRegister, isSubmitted }) => {\r\n  const [userData, setUserData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!userData.password || !userData.email) {\r\n      return;\r\n    }\r\n    handleRegister(userData.email, userData.password, userData.confirmPassword);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        mix={\"page__header section\"}\r\n        buttonText={\"Войти\"}\r\n        endPoint={\"/sign-in\"}\r\n      />\r\n      <InitialPageWithForm\r\n        name={\"user-sign-up\"}\r\n        title={\"Регистрация\"}\r\n        button={!isSubmitted ? \"Зарегистрироваться\" : \"Идет регистрация\"}\r\n        onSubmit={handleSubmit}\r\n        userSignUp={\"Войти\"}\r\n        isSubmitted={isSubmitted}\r\n      >\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"email\"\r\n          value={userData.email}\r\n          id=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          colormodifier={\"form__login-input\"}\r\n          required={true}\r\n          minLength=\"2\"\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"password\"\r\n          value={userData.password}\r\n          id=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Пароль\"\r\n          colormodifier={\"form__login-input\"}\r\n          required={true}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"password\"\r\n          value={userData.confirmPassword}\r\n          id=\"confirmPassword\"\r\n          name=\"confirmPassword\"\r\n          placeholder=\"Подтвердите пароль\"\r\n          colormodifier={\"form__login-input\"}\r\n          required={true}\r\n          onChange={handleChange}\r\n        />\r\n      </InitialPageWithForm>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  const { isLoggedIn } = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        isLoggedIn ? <Component {...props} /> : <Redirect to={props.to} />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;","import React, { useContext } from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst InfoToolTip = ({ isOpen, onClose, name }) => {\r\n  const { authUserData, isSignedUp } = useContext(CurrentUserContext);\r\n\r\n  // console.log(authUserData.message)\r\n  return (\r\n    <section\r\n      className={`popup ${\r\n        isOpen ? \"popup_is-opened\" : \"\"\r\n      }`}\r\n      id={`edit-${name}`}\r\n      onClick={onClose}\r\n    >\r\n      <div className=\"popup__content popup__content_size-s\">\r\n        <div\r\n          className={`popup__icon ${\r\n            isSignedUp\r\n              ? \"popup__icon_status_ok\"\r\n              : \"popup__icon_status_err\"\r\n          }`}\r\n        />\r\n        <h2 className=\"popup__title\">\r\n          {authUserData.message}\r\n        </h2>\r\n        <button\r\n          arial-lable=\"Закрыть форму без сохранения данных\"\r\n          tittle=\"Закрыть\"\r\n          type=\"button\"\r\n          className=\"popup__close\"\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default InfoToolTip;","export const BASE_URL = \"https://api.mesto-full.nomoredomains.work\";\r\n\r\nconst headers = {\r\n  \"Content-Type\": \"application/json\",\r\n};\r\nconst checkStatus = (res) => {\r\n  return res.ok\r\n    ? res.json()\r\n    : Promise.reject(`${res.status} ${res.statusText}`);\r\n};\r\n\r\n//регистрация\r\nexport const register = (email, password) => {\r\n  return (\r\n    fetch(`${BASE_URL}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password,\r\n      }),\r\n    })\r\n    .then((res) => {\r\n      return checkStatus(res);\r\n      })\r\n  );\r\n};\r\n\r\n//авторизация\r\nexport const login = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n             Accept: \"application/json\",\r\n             \"Content-Type\": \"application/json\",\r\n           },\r\n    body: JSON.stringify({ email, password }),\r\n  }).then((res) => {\r\n    return checkStatus(res);\r\n  })\r\n};\r\n\r\n//проверка валидности токена\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      ...headers,\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  }).then((res) => {\r\n    return checkStatus(res);\r\n  });\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport '../index.css';\r\nimport api from '../utils/api'\r\nimport Main from './Main';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport PopupWithSubmit from \"./PopupWithSubmit\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport { Switch, Route, Redirect, useHistory } from \"react-router-dom\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport InfoToolTip from \"./InfoToolTip\";\r\nimport * as auth from \"../utils/auth\";\r\nimport { login, getContent } from \"../utils/auth\";\r\n\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n  \r\n  const [cards, setCards] = useState([]);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isPopupWithSubmitOpen, setIsPopupWithSubmitOpen] = useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [deletedCardData, setDeletedCardData] = useState({});\r\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [isSignedUp, setIsSignedUp] = useState(false);\r\n  const [authUserData, setAuthUserData] = useState({});\r\n  const [userEmail, setUserEmail] = useState({});\r\n  const [isShowPassword, setIsShowPassword] = useState(false);\r\n  const [isBurgerMenuOpen, setIsBurgerMenuOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [statusRegister, setStatusRegister] = useState(false);\r\n  const history = useHistory();\r\n  const ESC_KEYCODE = 27;\r\n\r\n  \r\n\r\n  // useEffect(() => {\r\n  //   api\r\n  //     .getInitialCards()\r\n  //     .then((res) => {\r\n  //       setCards(res);\r\n  //       //console.log(res);\r\n  //     })\r\n  //     .catch((err) => {\r\n  //       console.log(\r\n  //         `Непредвиденная ошибка при загрузке карточек: ${err.status} ${err.statusText}`\r\n  //       );\r\n  //     });\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   api\r\n  //     .getUserInfo()\r\n  //     .then((userData) => {\r\n  //       setCurrentUser(userData);\r\n  //     })\r\n  //     .catch((err) => {\r\n  //       console.log(\r\n  //         `Непредвиденная ошибка при загрузке данных пользователя: ${err.status} ${err.statusText}`\r\n  //       );\r\n  //     });\r\n  // }, []);\r\n  useEffect(() => {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    if (jwt) {\r\n      getContent(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setUserEmail(res.email);\r\n            setIsLoggedIn(true);\r\n            history.push(\"/\");\r\n            //setHeaderLinkName(\"Выйти\");\r\n            api\r\n            .getUserInfo(jwt)\r\n            .then((data) => {\r\n              setCurrentUser(data);\r\n              api\r\n              .getInitialCards(jwt)\r\n              .then((data) => {\r\n                setCards(data);\r\n              })\r\n              .catch((err) => {\r\n                showErrorMessage(err);\r\n              });\r\n            })\r\n            .catch((err) => {\r\n              showErrorMessage(err);\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          showErrorMessage(err);\r\n        });\r\n    }\r\n  }, [isLoggedIn, history]);\r\n\r\n  // const handleAddCardSubmit = (newCard) => {\r\n  //   setIsSubmitted(true);\r\n\r\n  //   api\r\n  //     .addCard(newCard)\r\n  //     .then((newCard) => {\r\n  //       setCards([newCard, ...cards]);\r\n  //       setIsAddPlacePopupOpen(false);\r\n  //       setTimeout(() => setIsSubmitted(false), 1000);\r\n  //     })\r\n  //     .catch((err) => {\r\n  //       console.log(\r\n  //         `Непредвиденная ошибка при загрузки карточки пользователя: ${err.status} ${err.statusText}`\r\n  //       );\r\n  //     });\r\n  // };\r\n  function handleAddCardSubmit(data) {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    api\r\n      .addNewCard(data, jwt)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n      });\r\n  }\r\n\r\n  const handleCardLike = (card) => {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    const isLiked = card.likes.some((user) => user._id === currentUser._id);\r\n\r\n    const method = !isLiked ? \"PUT\" : \"DELETE\";\r\n    api\r\n      .likeCard(method, card._id, jwt)\r\n      .then((newCard) => {\r\n        setCards((items) =>\r\n          items.map((item) => (item._id === card._id ? newCard : item))\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Ошибка при установке лайка: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n\r\n  const handleCardDelete = (card) => {\r\n    setIsSubmitted(true);\r\n\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        setCards(cards.filter((item) => item._id !== card._id));\r\n        setIsPopupWithSubmitOpen(false);\r\n        setTimeout(() => setIsSubmitted(false), 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Ошибка при удалении карточки: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n\r\n   const handleAvatarUpdate = (data) => {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    setIsSubmitted(true);\r\n\r\n    api\r\n      .updateUserAvatar(data, jwt)\r\n      .then((data) => {\r\n        setCurrentUser(Object.assign(currentUser, { avatar: data.avatar }));\r\n        setIsEditAvatarPopupOpen(false);\r\n        setTimeout(() => setIsSubmitted(false), 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Непредвиденная ошибка при загрузки изображения аватара: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n  // function handleAvatarUpdate(data) {\r\n  //   const jwt = localStorage.getItem(\"jwt\");\r\n  //   api\r\n  //     .updateUserAvatar(data,jwt)\r\n  //     .then((data) => {\r\n  //       setCurrentUser(data);\r\n  //       closeAllPopups();\r\n  //     })\r\n  //     .catch((err) => {\r\n  //       showErrorMessage(err);\r\n  //     });\r\n  // }\r\n\r\n  const handleUserUpdate = (data) => {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    setIsSubmitted(true);\r\n\r\n    api\r\n      .updateDataUser(data, jwt)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        setIsEditProfilePopupOpen(false);\r\n        setTimeout(() => setIsSubmitted(false), 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          `Непредвиденная ошибка при передаче на сервер данных пользователя: ${err.status} ${err.statusText}`\r\n        );\r\n      });\r\n  };\r\n\r\n  function showErrorMessage(error) {\r\n    setErrorMessage(error);\r\n    setTimeout(() => {\r\n      setErrorMessage(\"\");\r\n    }, 3000);\r\n  }\r\n\r\n  const handleRegister = (email, password, confirmPassword) => {\r\n    if (password === confirmPassword) {\r\n      setIsSubmitted(true);\r\n\r\n      auth\r\n        .register(email, password)\r\n        .then((res) => {\r\n          if (res) {\r\n            setAuthUserData({\r\n              ...authUserData,\r\n              message: \"Вы успешно зарегистрировались!\",\r\n            });\r\n            setIsInfoToolTipOpen(true);\r\n            setIsSignedUp(true);\r\n            setIsShowPassword(false);\r\n            history.push(\"/signin\");\r\n          } else {\r\n            setAuthUserData({\r\n              ...authUserData,\r\n              message: \"Что-то пошло не так! Попробуйте еще раз.\",\r\n            });\r\n            setIsInfoToolTipOpen(true);\r\n            setIsSignedUp(false);\r\n            setIsShowPassword(false);\r\n            setIsSubmitted(false);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          const errorMessage = String(err);\r\n          console.log(\r\n            `Ошибка регистрации пользователя: ${errorMessage.split(\":\")[1]}`\r\n          );\r\n\r\n          setAuthUserData({\r\n            ...authUserData,\r\n            message: `${errorMessage.split(\":\")[1]}!`,\r\n          });\r\n          setIsInfoToolTipOpen(true);\r\n          setIsSignedUp(false);\r\n          setTimeout(() => setIsSubmitted(false), 3000);\r\n        });\r\n    } else {\r\n      setAuthUserData({\r\n        ...authUserData,\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n        message: \"Пароли не совпадают! Попробуйте еще раз\",\r\n      });\r\n      setIsSignedUp(false);\r\n      setIsShowPassword(false);\r\n      setIsInfoToolTipOpen(true);\r\n    }\r\n\r\n    setTimeout(() => setIsSubmitted(false), 2000);\r\n  };\r\n\r\n\r\n  // \r\n  function onLogin(email, password) {\r\n    login(email, password)\r\n      .then((data) => {\r\n        if (!data) {\r\n          setStatusRegister(false);\r\n          setIsInfoToolTipOpen(true);\r\n          return;\r\n        }\r\n        if (data.token) {\r\n          localStorage.setItem(\"jwt\", data.token);\r\n          setUserEmail(email);\r\n          setIsLoggedIn(true);\r\n          //setHeaderLinkName(\"Выйти\");\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n        setStatusRegister(false);\r\n        setIsInfoToolTipOpen(true);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    handleTokenCheck();\r\n  }, [history]);\r\n\r\n  const handleTokenCheck = () => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n\r\n    if (token) {\r\n      auth\r\n        .getContent(token)\r\n        .then((res) => {\r\n          const { data } = res;\r\n          setUserEmail(data.email);\r\n          setIsLoggedIn(true);\r\n          history.push(\"/main\");\r\n        })\r\n        .catch((err) => {\r\n          console.log(`Ошибка при проверке токена:${err}`)\r\n          history.push(\"/signin\")\r\n          setAuthUserData({\r\n            ...authUserData,\r\n            message: `Ошибка авторизации пользователя. Пожалуйста, войдите под своей учетной записью`,\r\n          });\r\n          setIsInfoToolTipOpen(true);\r\n        });\r\n    }\r\n  };\r\n\r\n  const signOut = () => {\r\n    setIsLoggedIn(false);\r\n    localStorage.removeItem(\"jwt\");\r\n    setUserEmail({});\r\n    history.push(\"/signin\");\r\n  };\r\n\r\n  const closeAllPopups = (evt) => {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n    setIsInfoToolTipOpen(false);\r\n  };\r\n\r\n  const handleClickClosePopup = (e) => {\r\n    if (\r\n      e.target.classList.contains(\"popup\") ||\r\n      e.target.classList.contains(\"popup__close\")\r\n    ) {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  const handleEscClose = (e) => {\r\n    if (e.keyCode === ESC_KEYCODE) {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  const handleCardClick = (value) => {\r\n    setIsImagePopupOpen(true);\r\n    setSelectedCard(value);\r\n  };\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true);\r\n  };\r\n\r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true);\r\n  };\r\n\r\n  const handlePopupWithForm = (data) => {\r\n    setIsPopupWithSubmitOpen(true);\r\n    setDeletedCardData(data);\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isEditProfilePopupOpen ||\r\n      isAddPlacePopupOpen ||\r\n      isEditAvatarPopupOpen ||\r\n      isImagePopupOpen ||\r\n      isPopupWithSubmitOpen\r\n    ) {\r\n      document.addEventListener(\"keydown\", handleEscClose);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEscClose);\r\n    };\r\n  }, [\r\n    isEditProfilePopupOpen,\r\n    isAddPlacePopupOpen,\r\n    isEditAvatarPopupOpen,\r\n    isImagePopupOpen,\r\n    isPopupWithSubmitOpen,\r\n  ]);\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n  <CurrentUserContext.Provider \r\n    value={{\r\n     currentUser,\r\n     authUserData,\r\n     isLoggedIn,\r\n     setIsShowPassword,\r\n     isShowPassword,\r\n     isSignedUp,\r\n     isBurgerMenuOpen,\r\n     setIsBurgerMenuOpen,\r\n    }}\r\n    >\r\n    <div className=\"page\">\r\n    <Switch>\r\n      <ProtectedRoute\r\n        path=\"/main\"\r\n        component={Main}\r\n        onEditProfile={handleEditProfileClick}\r\n        onEditAvatar={handleEditAvatarClick}\r\n        onAddPlace={handleAddPlaceClick}\r\n        onCardClick={handleCardClick}\r\n        cards={cards}\r\n        onLikeClick={handleCardLike}\r\n        onDeleteClick={handlePopupWithForm}\r\n        signOut={signOut}\r\n        to={\"/signin\"}\r\n        userEmail={userEmail}\r\n      />\r\n      <Route path=\"/signin\">\r\n        <Login onLogin={onLogin} isSubmitted={isSubmitted} />\r\n      </Route>\r\n      <Route path=\"/sign-up\">\r\n        <Register\r\n          handleRegister={handleRegister}\r\n          isSubmitted={isSubmitted}\r\n        />  \r\n      </Route>\r\n      <Route path=\"/\">\r\n        {isLoggedIn ? (\r\n          <Redirect to=\"/main\" />\r\n        ) : (\r\n          <Redirect to=\"/signin\" />\r\n        )}\r\n      </Route>\r\n    </Switch>\r\n        \r\n    <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={handleClickClosePopup}\r\n          onUpdateAvatar={handleAvatarUpdate}\r\n          isSubmitted={isSubmitted}\r\n        />\r\n\r\n    <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={handleClickClosePopup}\r\n          onUpdateUser={handleUserUpdate}\r\n          isSubmitted={isSubmitted}\r\n        />\r\n\r\n    <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={handleClickClosePopup}\r\n          onAddPlace={handleAddCardSubmit}\r\n          isSubmitted={isSubmitted}\r\n        />    \r\n\r\n    <ImagePopup\r\n          isOpen={isImagePopupOpen}\r\n          data={selectedCard}\r\n          onClose={handleClickClosePopup}\r\n        />\r\n    <PopupWithSubmit\r\n          isOpen={isPopupWithSubmitOpen}\r\n          onClose={handleClickClosePopup}\r\n          isSubmitted={isSubmitted}\r\n          deleteCard={handleCardDelete}\r\n          data={deletedCardData}\r\n        />\r\n    <InfoToolTip\r\n          isOpen={isInfoToolTipOpen}\r\n          onClose={handleClickClosePopup}\r\n          name={\"infoToolTip\"}\r\n        />\r\n\r\n    </div>\r\n  </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n   <BrowserRouter> \r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}