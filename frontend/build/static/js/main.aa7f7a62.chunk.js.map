{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","hooks/useFormValidator.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","components/InfoTooltip.js","utils/auth.js","components/ErrorMessagePopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","userEmail","headerLinkName","onSignOut","React","useState","visibleHeaderMenu","setVisibleHeaderMenu","className","onClick","type","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","style","backgroundImage","link","name","aria-label","length","Main","onAddPlace","onEditProfile","onEditAvatar","cards","avatar","about","map","Footer","Popup","onClose","isOpen","title","children","e","target","classList","contains","ImagePopup","src","alt","api","baseUrl","this","_baseUrl","res","ok","json","Promise","reject","status","statusText","token","fetch","headers","then","_checkStatus","data","method","body","JSON","stringify","id","PopupWithForm","isDisabled","buttonText","onSubmit","noValidate","action","disabled","useFormValidator","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","value","validationMessage","closest","checkValidity","EditProfilePopup","onUpdateUser","sendingState","currentFormValidator","useEffect","preventDefault","onChange","required","minLength","maxLength","placeholder","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","DeleteCardPopup","cardDelete","ProtectedRoute","Component","component","props","loggedIn","to","Login","onLogin","email","password","Register","onRegister","InfoTooltip","statusRegister","BASE_URL","checkStatus","ErrorMessagePopup","errorMessage","App","history","useHistory","location","useLocation","setCurrentUser","visiblePopupEditProfile","setVisiblePopupEditProfile","visiblePopupAddPlace","setVisiblePopupAddPlace","visiblePopupEditAvatar","setVisiblePopupEditAvatar","visiblePopupDeleteCard","setVisiblePopupDeleteCard","visiblePopupImageFullscreen","setVisiblePopupImageFullscreen","selectedCard","setSelectedCard","setErrorMessage","sendingStatus","setSendingStatus","setCards","setCardDelete","setLoggedIn","visiblePopupInfoTooltip","setVisiblePopupInfoTooltip","setStatusRegister","setUserEmail","setHeaderLinkName","closeAllPopups","setTimeout","showErrorMessage","error","handleEscClose","key","localStorage","removeItem","push","pathname","jwt","getItem","Authorization","getUserInfo","getInitialCards","catch","err","document","addEventListener","Provider","exact","path","likeCard","newCard","state","c","login","setItem","register","updateDataUser","addNewCard","deleteCard","filter","updateUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"4MAEe,SAASA,EAAT,GAA2D,IAAzCC,EAAwC,EAAxCA,UAAWC,EAA6B,EAA7BA,eAAgBC,EAAa,EAAbA,UAC1D,EAAkDC,IAAMC,UAAS,GAAjE,mBAAOC,EAAP,KAA0BC,EAA1B,KAWA,OACE,yBAAQC,UAAU,SAAlB,UACE,qBAAKA,UAAU,iBACf,qBACEA,UAAS,wBACPP,EAAY,4BAA8B,GADnC,YAELK,EAAoB,2BAA6B,IACrDG,QAhBN,WACEF,GAAsBD,MAiBpB,sBACEE,UAAS,gCACPP,EAAY,oCAAsC,GAD3C,YAELK,EAAoB,oCAAsC,IAHhE,UAKE,qBAAKE,UAAU,6BAAf,SACE,mBACEA,UAAS,8BACPP,EAAY,kCAAoC,IAFpD,SAKGA,MAGL,wBACES,KAAK,SACLF,UAAS,0BACPP,EAAY,8BAAgC,IAE9CQ,QAjCR,WACEF,GAAqB,GACrBJ,KA0BI,SAOGD,UC1CJ,IAAMS,EAAqBP,IAAMQ,gBCCzB,SAASC,EAAT,GAAgE,IAAhDC,EAA+C,EAA/CA,KAAMC,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,aACtDC,EAAcC,qBAAWR,GACzBS,EAAQN,EAAKO,QAAUH,EAAYI,IACnCC,EAAyB,WAAOH,EAAQ,eAAiB,GAAhC,KACzBI,EAAUV,EAAKW,MAAMC,MAAK,SAACC,GAAD,OAAOA,IAAMT,EAAYI,OAczD,OACE,qBAAId,UAAU,OAAd,UACE,qBACEA,UAAU,cACVoB,MAAO,CAAEC,gBAAgB,OAAD,OAASf,EAAKgB,KAAd,MACxBrB,QAjBN,WACEM,EAAYD,MAkBV,oBAAIN,UAAU,cAAd,SAA6BM,EAAKiB,OAClC,wBACEtB,QAjBN,WACEO,EAAWF,IAiBPJ,KAAK,SACLsB,aAAW,cACXxB,UAAS,wBAAmBgB,EAAU,oBAAsB,GAAnD,MAJX,SAME,mBAAGhB,UAAU,sBAAb,SAAoCM,EAAKW,MAAMQ,WAEjD,qBACExB,QArBN,WACEQ,EAAaH,IAqBTN,UAAWe,OCnCJ,SAASW,EAAT,GAQX,IAPFnB,EAOC,EAPDA,YACAoB,EAMC,EANDA,WACAC,EAKC,EALDA,cACAC,EAIC,EAJDA,aACAC,EAGC,EAHDA,MACAtB,EAEC,EAFDA,WACAC,EACC,EADDA,aAEMC,EAAcC,qBAAWR,GAE/B,OACE,uBAAMH,UAAU,UAAhB,UACE,0BAASA,UAAU,UAAnB,UACE,wBACEE,KAAK,SACLsB,aAAW,oBACXxB,UAAU,kBACVC,QAAS4B,EACTT,MAAO,CAAEC,gBAAgB,OAAD,OAASX,EAAYqB,OAArB,QAE1B,sBAAK/B,UAAU,gBAAf,UACE,oBAAIA,UAAU,iBAAd,SAAgCU,EAAYa,OAC5C,wBACErB,KAAK,SACLsB,aAAW,eACXxB,UAAU,uBACVC,QAAS2B,IAEX,mBAAG5B,UAAU,oBAAb,SAAkCU,EAAYsB,WAEhD,wBACE9B,KAAK,SACLsB,aAAW,YACXxB,UAAU,sBACVC,QAAS0B,OAGb,yBAAS3B,UAAU,SAAnB,SACE,oBAAIA,UAAU,QAAd,SACG8B,EAAMG,KAAI,SAAC3B,GAAD,OACT,cAACD,EAAD,CACEI,aAAcA,EACdD,WAAYA,EACZF,KAAMA,EAENC,YAAaA,GADRD,EAAKQ,eC/CT,SAASoB,IACtB,OACE,wBAAQlC,UAAU,SAAlB,SACE,mBAAGA,UAAU,oBAAb,sCCHS,SAASmC,EAAT,GAA+D,IAA9CC,EAA6C,EAA7CA,QAASb,EAAoC,EAApCA,KAAMc,EAA8B,EAA9BA,OAA8B,IAAtBC,aAAsB,MAAhB,GAAgB,EAAZC,EAAY,EAAZA,SAK/D,OACE,qBACEtC,QANJ,SAA4BuC,GACtBA,EAAEC,OAAOC,UAAUC,SAAS,UAAYP,GAASA,KAMnDpC,UAAS,2BAAsBuB,EAAtB,YAA8Bc,EAAS,gBAAkB,GAAzD,KAFX,SAIE,sBAAKrC,UAAS,iDAA4CuB,GAA1D,UACE,wBACErB,KAAK,SACLsB,aAAW,cACXxB,UAAS,yCAAoCuB,GAC7CtB,QAASmC,IAEX,oBAAIpC,UAAS,yCAAoCuB,GAAjD,SAA0De,IACzDC,OCjBM,SAASK,EAAT,GAAgD,IAA1BtC,EAAyB,EAAzBA,KAAM8B,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,OAClD,OACE,cAACF,EAAD,CAAOZ,KAAK,aAAac,OAAQA,EAAQD,QAASA,EAAlD,SACE,yBAAQpC,UAAU,2BAAlB,UACE,qBACE6C,IAAG,UAAKvC,EAAKgB,MACbwB,IAAKxC,EAAKiB,KACVvB,UAAU,4BAEZ,4BAAYA,UAAU,iBAAtB,SAAwCM,EAAKiB,Y,oBCoFtCwB,EAJH,I,WA3FV,cAA0B,IAAZC,EAAW,EAAXA,QAAW,oBACvBC,KAAKC,SAAWF,E,gDAGlB,SAAaG,GACX,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,gDAA0BJ,EAAIK,OAA9B,YAAwCL,EAAIM,e,yBAGrD,SAAYC,GAAQ,IAAD,OACjB,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,aAA8B,CACxCU,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BF,MAE5BG,MAAK,SAACV,GACP,OAAO,EAAKW,aAAaX,Q,6BAG7B,SAAgBO,GAAQ,IAAD,OACrB,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,UAA2B,CACrCU,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BF,MAE5BG,MAAK,SAACV,GACP,OAAO,EAAKW,aAAaX,Q,4BAG7B,SAAeY,EAAML,GAAQ,IAAD,OAC1B,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,aAA8B,CACxCc,OAAQ,QACRJ,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BF,IAE7BO,KAAMC,KAAKC,UAAUJ,KACpBF,MAAK,SAACV,GACP,OAAO,EAAKW,aAAaX,Q,wBAG7B,SAAWY,EAAML,GAAQ,IAAD,OACtB,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,UAA2B,CACrCc,OAAQ,OACRJ,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BF,IAE7BO,KAAMC,KAAKC,UAAUJ,KACpBF,MAAK,SAACV,GACP,OAAO,EAAKW,aAAaX,Q,wBAG7B,SAAWiB,EAAIV,GAAQ,IAAD,OACpB,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,kBAA2BkB,GAAM,CAC3CJ,OAAQ,SACRJ,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BF,MAE5BG,MAAK,SAACV,GACP,OAAO,EAAKW,aAAaX,Q,8BAG7B,SAAiBY,EAAML,GAAQ,IAAD,OAC5B,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,oBAAqC,CAC/Cc,OAAQ,QACRJ,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BF,IAE7BO,KAAMC,KAAKC,UAAUJ,KACpBF,MAAK,SAACV,GACP,OAAO,EAAKW,aAAaX,Q,sBAG7B,SAASa,EAAQI,EAAIV,GAAQ,IAAD,OAC1B,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,kBAA2BkB,EAA3B,UAAuC,CACjDJ,OAAQA,EACRJ,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BF,MAE5BG,MAAK,SAACV,GACP,OAAO,EAAKW,aAAaX,U,KAKnB,CAAQ,CAClBH,QAAS,8C,OC1FI,SAASqB,EAAT,GASX,IARF9C,EAQC,EARDA,KACAe,EAOC,EAPDA,MACAD,EAMC,EANDA,OACAD,EAKC,EALDA,QACAG,EAIC,EAJDA,SAIC,IAHD+B,kBAGC,SAFDC,EAEC,EAFDA,WACAC,EACC,EADDA,SAEA,OACE,cAACrC,EAAD,CAAOC,QAASA,EAASb,KAAMA,EAAMc,OAAQA,EAAQC,MAAOA,EAA5D,SACE,uBACEkC,SAAUA,EACVC,YAAU,EACVC,OAAO,IACPnD,KAAMA,EACNvB,UAAS,uCAAkCuB,GAC3CyC,OAAO,OANT,UAQGzB,EACD,wBACEoC,SAAUL,EACV9C,aAAW,cACXxB,UAAS,+BACPsE,EAAa,gCAAkC,GADxC,sCAEqB/C,GAC9BrB,KAAK,SANP,SAQGqE,S,YC9BI,SAASK,IACtB,MAA4B/E,mBAAS,IAArC,mBAAOgF,EAAP,KAAeC,EAAf,KACA,EAA4BjF,mBAAS,IAArC,mBAAOkF,EAAP,KAAeC,EAAf,KACA,EAA8BnF,oBAAS,GAAvC,mBAAOoF,EAAP,KAAgBC,EAAhB,KASMC,EAAYC,uBAChB,WAAyD,IAAxDC,EAAuD,uDAA3C,GAAIC,EAAuC,uDAA3B,GAAIC,EAAuB,wDACtDT,EAAUO,GACVL,EAAUM,GACVJ,EAAWK,KAEb,CAACT,EAAWE,EAAWE,IAGzB,MAAO,CACLL,SACAW,aAlBmB,SAAChD,GACpB,MAAwBA,EAAEC,OAAlBlB,EAAR,EAAQA,KAAMkE,EAAd,EAAcA,MACdX,EAAU,2BAAKD,GAAN,kBAAetD,EAAOkE,KAC/BT,EAAU,2BAAKD,GAAN,kBAAexD,EAAOiB,EAAEC,OAAOiD,qBACxCR,EAAW1C,EAAEC,OAAOkD,QAAQ,QAAQC,kBAepCb,SACAE,UACAE,YACAL,YACAI,cCzBW,SAASW,EAAT,GAKX,IAJFC,EAIC,EAJDA,aACAzD,EAGC,EAHDA,OACAD,EAEC,EAFDA,QACA2D,EACC,EADDA,aAEMC,EAAuBpB,IACvBlE,EAAcC,qBAAWR,GAsB/B,OApBA8F,qBAAU,WACJvF,EAAYa,OACdyE,EAAqBb,YACrBa,EAAqBlB,UAArB,2BACKkB,EAAqBnB,QAD1B,IAEEtD,KAAMb,EAAYa,KAClBS,MAAOtB,EAAYsB,SAErBgE,EAAqBd,YAAW,MAEjC,CAACxE,EAAa2B,IAWf,eAACgC,EAAD,CACE9C,KAAK,eACLe,MAAM,4HACND,OAAQA,EACRD,QAASA,EACTmC,WAAU,WAAMwB,GAA8B,yDAApC,KACVzB,YAAa0B,EAAqBf,QAClCT,SAhBJ,SAAsBhC,GACpBA,EAAE0D,iBACFJ,EAAa,CACXvE,KAAMyE,EAAqBnB,OAAOtD,KAClCS,MAAOgE,EAAqBnB,OAAO7C,SAKrC,UASE,wBAAOhC,UAAU,eAAjB,UACE,uBACEyF,MAAOO,EAAqBnB,OAAOtD,MAAQ,GAC3C4E,SAAUH,EAAqBR,aAC/BpB,GAAG,kBACHgC,UAAQ,EACR7E,KAAK,OACL8E,UAAU,IACVC,UAAU,KACVC,YAAY,qBACZvG,UAAS,wBACPgG,EAAqBjB,OAAOxD,KAAO,0BAA4B,IAEjErB,KAAK,SAEP,sBAAMF,UAAU,2CAAhB,SACGgG,EAAqBjB,OAAOxD,UAGjC,wBAAOvB,UAAU,eAAjB,UACE,uBACEyF,MAAOO,EAAqBnB,OAAO7C,OAAS,GAC5CmE,SAAUH,EAAqBR,aAC/BpB,GAAG,YACHgC,UAAQ,EACR7E,KAAK,QACL8E,UAAU,IACVC,UAAU,MACVC,YAAY,kCACZvG,UAAS,wBACPgG,EAAqBjB,OAAO/C,MAAQ,0BAA4B,IAElE9B,KAAK,SAEP,sBAAMF,UAAU,qCAAhB,SACGgG,EAAqBjB,OAAO/C,cC3ExB,SAASwE,EAAT,GAKX,IAJFnE,EAIC,EAJDA,OACAD,EAGC,EAHDA,QACAqE,EAEC,EAFDA,eACAV,EACC,EADDA,aAEMC,EAAuBpB,IAa7B,OAXAqB,qBAAU,WACRD,EAAqBb,cACpB,CAAC9C,IAUF,cAACgC,EAAD,CACE9C,KAAK,gBACLe,MAAM,wFACND,OAAQA,EACRD,QAASA,EACTmC,WAAU,WAAMwB,GAA8B,yDAApC,KACVzB,YAAa0B,EAAqBf,QAClCT,SAfJ,SAAsBhC,GACpBA,EAAE0D,iBACFO,EAAe,CACb1E,OAAQiE,EAAqBnB,OAAOvD,QAKtC,SASE,wBAAOtB,UAAU,eAAjB,UACE,uBACEyF,MAAOO,EAAqBnB,OAAOvD,MAAQ,GAC3C6E,SAAUH,EAAqBR,aAC/BpB,GAAG,oBACHlE,KAAK,MACLkG,UAAQ,EACR7E,KAAK,OACLgF,YAAY,qGACZvG,UAAS,wBACPgG,EAAqBjB,OAAOzD,KAAO,0BAA4B,MAGnE,sBAAMtB,UAAU,6CAAhB,SACGgG,EAAqBjB,OAAOzD,YC3CxB,SAASoF,EAAT,GAKX,IAJFrE,EAIC,EAJDA,OACAD,EAGC,EAHDA,QACAT,EAEC,EAFDA,WACAoE,EACC,EADDA,aAEMC,EAAuBpB,IAc7B,OAZAqB,qBAAU,WACRD,EAAqBb,cACpB,CAAC9C,IAWF,eAACgC,EAAD,CACE9C,KAAK,WACLe,MAAM,gEACND,OAAQA,EACRD,QAASA,EACTmC,WAAU,WAAMwB,GAA8B,6CAApC,KACVzB,YAAa0B,EAAqBf,QAClCT,SAhBJ,SAAsBhC,GACpBA,EAAE0D,iBACFvE,EAAW,CACTJ,KAAMyE,EAAqBnB,OAAOtD,KAClCD,KAAM0E,EAAqBnB,OAAOvD,QAKpC,UASE,wBAAOtB,UAAU,eAAjB,UACE,uBACEyF,MAAOO,EAAqBnB,OAAOtD,MAAQ,GAC3C4E,SAAUH,EAAqBR,aAC/BpB,GAAG,iBACHgC,UAAQ,EACR7E,KAAK,OACL8E,UAAU,IACVC,UAAU,KACVC,YAAY,mDACZvG,UAAS,wBACPgG,EAAqBjB,OAAOxD,KAAO,0BAA4B,IAEjErB,KAAK,SAEP,sBAAMF,UAAU,0CAAhB,SACGgG,EAAqBjB,OAAOxD,UAGjC,wBAAOvB,UAAU,eAAjB,UACE,uBACEyF,MAAOO,EAAqBnB,OAAOvD,MAAQ,GAC3C6E,SAAUH,EAAqBR,aAC/BpB,GAAG,aACHlE,KAAK,MACLkG,UAAQ,EACR7E,KAAK,OACLgF,YAAY,qGACZvG,UAAS,wBACPgG,EAAqBjB,OAAOzD,KAAO,0BAA4B,MAGnE,sBAAMtB,UAAU,0CAAhB,SACGgG,EAAqBjB,OAAOzD,aChExB,SAASqF,EAAT,GAMX,IALFtE,EAKC,EALDA,OACAD,EAIC,EAJDA,QACAwE,EAGC,EAHDA,WACAnG,EAEC,EAFDA,aACAsF,EACC,EADDA,aAOA,OACE,cAAC1B,EAAD,CACE9C,KAAK,cACLe,MAAM,2DACNF,QAASA,EACTmC,WAAU,WAAMwB,GAA8B,eAApC,KACV1D,OAAQA,EACRmC,SAZJ,SAAsBhC,GACpBA,EAAE0D,iBACFzF,EAAamG,M,mCCCFC,EAVQ,SAAC,GAAwC,IAA3BC,EAA0B,EAArCC,UAAyBC,EAAY,iBAC7D,OACE,cAAC,IAAD,UACG,kBACCA,EAAMC,SAAW,cAACH,EAAD,eAAeE,IAAY,cAAC,IAAD,CAAUE,GAAG,iBCJlD,SAASC,EAAT,GAA6B,IAAZC,EAAW,EAAXA,QACxBpB,EAAuBpB,IAU7B,OACE,sBAAK5E,UAAU,QAAf,UACE,oBAAIA,UAAU,eAAd,sCACA,uBACEA,UAAU,cACVyE,YAAU,EACVC,OAAO,IACPV,OAAO,OACPzC,KAAK,QACLiD,SAjBN,SAAsBhC,GACpBA,EAAE0D,iBACFkB,EACEpB,EAAqBnB,OAAOwC,MAC5BrB,EAAqBnB,OAAOyC,WAO5B,UAQE,wBAAOtH,UAAU,eAAjB,UACE,uBACEoE,GAAG,oBACHgC,UAAQ,EACR7E,KAAK,QACL8E,UAAU,IACVC,UAAU,KACVC,YAAY,QACZvG,UAAS,wBACPgG,EAAqBjB,OAAOsC,MAAQ,0BAA4B,IAElEnH,KAAK,QACLuF,MAAOO,EAAqBnB,OAAOwC,OAAS,GAC5ClB,SAAUH,EAAqBR,eAEjC,sBAAMxF,UAAU,6CAAhB,SACGgG,EAAqBjB,OAAOsC,WAGjC,wBAAOrH,UAAU,eAAjB,UACE,uBACEoE,GAAG,uBACHgC,UAAQ,EACR7E,KAAK,WACL8E,UAAU,IACVC,UAAU,KACVC,YAAY,uCACZvG,UAAS,wBACPgG,EAAqBjB,OAAOuC,SACxB,0BACA,IAENpH,KAAK,WACLuF,MAAOO,EAAqBnB,OAAOyC,UAAY,GAC/CnB,SAAUH,EAAqBR,eAEjC,sBAAMxF,UAAU,6CAAhB,SACGgG,EAAqBjB,OAAOuC,cAGjC,wBACE9F,aAAW,cACXxB,UAAS,gCACNgG,EAAqBf,QAA4C,GAAlC,gCADzB,KAGT/E,KAAK,SACLyE,UAAWqB,EAAqBf,QANlC,kD,YC7DO,SAASsC,EAAT,GAA8C,IAA1B5H,EAAyB,EAAzBA,UAAW6H,EAAc,EAAdA,WACtCxB,EAAuBpB,IAU7B,OACE,sBAAK5E,UAAU,QAAf,UACE,oBAAIA,UAAU,eAAd,gFACA,uBACEA,UAAU,cACVyE,YAAU,EACVC,OAAO,IACPV,OAAO,OACPzC,KAAK,WACLiD,SAjBN,SAAsBhC,GACpBA,EAAE0D,iBACFsB,EACExB,EAAqBnB,OAAOwC,MAC5BrB,EAAqBnB,OAAOyC,WAO5B,UAQE,wBAAOtH,UAAU,eAAjB,UACE,uBACEoE,GAAG,oBACHgC,UAAQ,EACR7E,KAAK,QACL8E,UAAU,IACVC,UAAU,KACVC,YAAY,QACZvG,UAAS,wBACPgG,EAAqBjB,OAAOsC,MAAQ,0BAA4B,IAElEnH,KAAK,QACLuF,MAAOO,EAAqBnB,OAAOwC,OAAS,GAC5ClB,SAAUH,EAAqBR,eAEjC,sBAAMxF,UAAU,6CAAhB,SACGgG,EAAqBjB,OAAOsC,WAGjC,wBAAOrH,UAAU,eAAjB,UACE,uBACEoE,GAAG,uBACHgC,UAAQ,EACR7E,KAAK,WACL8E,UAAU,IACVC,UAAU,KACVC,YAAY,uCACZvG,UAAS,wBACPgG,EAAqBjB,OAAOuC,SACxB,0BACA,IAENpH,KAAK,WACLuF,MAAOO,EAAqBnB,OAAOyC,UAAY,GAC/CnB,SAAUH,EAAqBR,eAEjC,sBAAMxF,UAAU,6CAAhB,SACGgG,EAAqBjB,OAAOuC,cAGjC,wBACE9F,aAAW,cACXxB,UAAS,gCACNgG,EAAqBf,QAA4C,GAAlC,gCADzB,KAGT/E,KAAK,SACLyE,UAAWqB,EAAqBf,QANlC,0HAUA,cAAC,IAAD,CAAMjF,UAAU,cAAckH,GAAG,WAAWjH,QAASN,EAArD,uKCzEO,SAAS8H,EAAT,GAAiE,IAA1CrF,EAAyC,EAAzCA,QAASsF,EAAgC,EAAhCA,eAAgBrF,EAAgB,EAAhBA,OAAQd,EAAQ,EAARA,KACrE,OACE,cAACY,EAAD,CACEC,QAASA,EACTb,KAAMA,EACNc,OAAQA,EACRC,MACEoF,EACI,wKACA,sMAPR,SAUE,qBACE1H,UAAS,yCACP0H,EAAiB,UAAY,eCjBvC,IAAMC,EAAW,4CAEX/D,EAAU,CACd,eAAgB,oBAGZgE,EAAc,SAACzE,GACnB,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,gDAA0BJ,EAAIK,OAA9B,YAAwCL,EAAIM,cCPtC,SAASoE,EAAT,GAA8C,IAAjBC,EAAgB,EAAhBA,aAC1C,OACE,cAAC3F,EAAD,CAAOZ,KAAK,gBAAgBc,OAAQyF,EAAcxF,MAAOwF,ICoB9C,SAASC,IACtB,IAAMC,EAAUC,cACVC,EAAWC,cACjB,EAAsCtI,mBAAS,IAA/C,mBAAOa,EAAP,KAAoB0H,EAApB,KACA,EAA8DvI,oBAAS,GAAvE,mBAAOwI,EAAP,KAAgCC,EAAhC,KACA,EAAwDzI,oBAAS,GAAjE,mBAAO0I,EAAP,KAA6BC,EAA7B,KACA,EAA4D3I,oBAAS,GAArE,mBAAO4I,EAAP,KAA+BC,EAA/B,KACA,EAA4D7I,oBAAS,GAArE,mBAAO8I,EAAP,KAA+BC,EAA/B,KACA,EACE/I,oBAAS,GADX,mBAAOgJ,EAAP,KAAoCC,EAApC,KAEA,EAAwCjJ,mBAAS,CAC/C0B,KAAM,GACND,KAAM,KAFR,mBAAOyH,EAAP,KAAqBC,EAArB,KAIA,GAAwCnJ,mBAAS,IAAjD,qBAAOiI,GAAP,MAAqBmB,GAArB,MACA,GAA0CpJ,mBAAS,IAAnD,qBAAOqJ,GAAP,MAAsBC,GAAtB,MACA,GAA0BtJ,mBAAS,IAAnC,qBAAOiC,GAAP,MAAcsH,GAAd,MACA,GAAoCvJ,mBAAS,CAAE0B,KAAM,GAAID,KAAM,KAA/D,qBAAOsF,GAAP,MAAmByC,GAAnB,MACA,GAAgCxJ,oBAAS,GAAzC,qBAAOoH,GAAP,MAAiBqC,GAAjB,MACA,GAA8DzJ,oBAAS,GAAvE,qBAAO0J,GAAP,MAAgCC,GAAhC,MACA,GAA4C3J,oBAAS,GAArD,qBAAO6H,GAAP,MAAuB+B,GAAvB,MACA,GAAkC5J,mBAAS,IAA3C,qBAAOJ,GAAP,MAAkBiK,GAAlB,MACA,GAA4C7J,mBAAS,IAArD,qBAAOH,GAAP,MAAuBiK,GAAvB,MAuEA,SAASC,KACPtB,GAA2B,GAC3BE,GAAwB,GACxBE,GAA0B,GAC1BI,GAA+B,GAC/Be,YAAW,WACTb,EAAgB,CAAEzH,KAAM,GAAID,KAAM,OACjC,KACHsH,GAA0B,GAC1BY,IAA2B,GAG7B,SAASM,GAAiBC,GACxBd,GAAgBc,GAChBF,YAAW,WACTZ,GAAgB,MACf,KA+EL,SAASe,GAAexH,GACR,WAAVA,EAAEyH,KACJL,KA8CJ,SAASjK,KACgB,mCAAnBD,KACFwK,aAAaC,WAAW,OACxBb,IAAY,GACZK,GAAkB,sEAClBD,GAAa,IACb1B,EAAQoC,KAAK,aAEQ,uEAAnB1K,IACFsI,EAAQoC,KAAK,YAEQ,mCAAnB1K,IACFsI,EAAQoC,KAAK,YAIjB,OApOAnE,qBAAU,WACkB,aAAtBiC,EAASmC,UACXV,GAAkB,sEAEM,aAAtBzB,EAASmC,UACXV,GAAkB,oCAEnB,CAACzB,IAEJjC,qBAAU,WACR,IF1BuBvC,EE0BjB4G,EAAMJ,aAAaK,QAAQ,OAC7BD,IF3BmB5G,EE4BV4G,EF3BR3G,MAAM,GAAD,OAAIgE,EAAJ,aAAyB,CACnC3D,OAAQ,MACRJ,QAAQ,2BACHA,GADE,IAEL4G,cAAc,UAAD,OAAY9G,OAE1BG,MAAK,SAACV,GACP,OAAOyE,EAAYzE,OEqBdU,MAAK,SAACV,GACDA,IACFuG,GAAavG,EAAIkE,OACjBiC,IAAY,GACZtB,EAAQoC,KAAK,KACbT,GAAkB,kCAClB5G,EACC0H,YAAYH,GACZzG,MAAK,SAACE,GACLqE,EAAerE,GACfhB,EACC2H,gBAAgBJ,GAChBzG,MAAK,SAACE,GACLqF,GAASrF,MAEV4G,OAAM,SAACC,GACNd,GAAiBc,SAGpBD,OAAM,SAACC,GACNd,GAAiBc,UAItBD,OAAM,SAACC,GACNd,GAAiBc,QAGtB,CAAC3D,GAAUe,IAEd/B,qBAAU,WACR4E,SAASC,iBAAiB,UAAWd,MACpC,IAwLD,cAAC7J,EAAmB4K,SAApB,CAA6BtF,MAAO/E,EAApC,SACE,qBAAKV,UAAU,OAAf,SACE,sBAAKA,UAAU,eAAf,UACE,cAACR,EAAD,CACEC,UAAWA,GACXC,eAAgBA,GAChBC,UAAWA,KAEb,eAAC,IAAD,WACE,cAAC,EAAD,CACEqL,OAAK,EACLC,KAAK,IACLhE,SAAUA,GACVF,UAAWrF,EACXE,cApMZ,WACE0G,GAA4BD,IAoMlB1G,WAjMZ,WACE6G,GAAyBD,IAiMf1G,aA9LZ,WACE6G,GAA2BD,IA8LjBlI,YAtLZ,SAAyBD,GACvB0I,EAAgB1I,GAChBwI,GAAgCD,IAqLtB/G,MAAOA,GACPtB,WAhKZ,SAAwBF,GACtB,IAAMgK,EAAMJ,aAAaK,QAAQ,OAC3BvJ,EAAUV,EAAKW,MAAMC,MAAK,SAACC,GAAD,OAAOA,IAAMT,EAAYI,OACzDiC,EACGmI,SAASlK,EAAU,SAAW,MAAOV,EAAKQ,IAAKwJ,GAC/CzG,MAAK,SAACsH,GACL/B,IAAS,SAACgC,GAAD,OACPA,EAAMnJ,KAAI,SAACoJ,GAAD,OAAQA,EAAEvK,MAAQR,EAAKQ,IAAMqK,EAAUE,WAGpDV,OAAM,SAACC,GACNd,GAAiBc,OAsJXnK,aA9LZ,SAA2BH,GACzBsI,GAA2BD,GAC3BU,GAAc/I,MA8LN,cAAC,IAAD,CAAO2K,KAAK,WAAZ,SACE,cAAC9D,EAAD,CAAOC,QA/DnB,SAAiBC,EAAOC,IFvNL,SAACD,EAAOC,GAC3B,OAAO3D,MAAM,GAAD,OAAIgE,EAAJ,WAAuB,CACjC3D,OAAQ,OACRJ,UACAK,KAAMC,KAAKC,UAAU,CAAEkD,QAAOC,eAC7BzD,MAAK,SAACV,GACP,OAAOyE,EAAYzE,OEkNnBmI,CAAMjE,EAAOC,GACVzD,MAAK,SAACE,GACL,IAAKA,EAGH,OAFA0F,IAAkB,QAClBD,IAA2B,GAGzBzF,EAAKL,QACPwG,aAAaqB,QAAQ,MAAOxH,EAAKL,OACjCgG,GAAarC,GACbiC,IAAY,GACZK,GAAkB,kCAClB3B,EAAQoC,KAAK,SAGhBO,OAAM,SAACC,GACNd,GAAiBc,GACjBnB,IAAkB,GAClBD,IAA2B,WA8CvB,cAAC,IAAD,CAAOyB,KAAK,WAAZ,SACE,cAAC1D,EAAD,CAAUC,WArFtB,SAAoBH,EAAOC,IF9ML,SAACD,EAAOC,GAC9B,OAAO3D,MAAM,GAAD,OAAIgE,EAAJ,WAAuB,CACjC3D,OAAQ,OACRJ,UACAK,KAAMC,KAAKC,UAAU,CAAEkD,QAAOC,eAC7BzD,MAAK,SAACV,GACP,OAAOyE,EAAYzE,OEyMnBqI,CAASnE,EAAOC,GACbzD,MAAK,SAACV,GACDA,GACFsG,IAAkB,GAClBD,IAA2B,GAC3BxB,EAAQoC,KAAK,cAEbX,IAAkB,GAClBD,IAA2B,OAG9BmB,OAAM,SAACC,GACNd,GAAiBc,GACjBnB,IAAkB,GAClBD,IAA2B,OAsEa7J,UAAWA,OAE/C,cAAC,IAAD,CAAOsL,KAAK,IAAZ,SACGhE,GAAW,cAAC,IAAD,CAAUC,GAAG,MAAS,cAAC,IAAD,CAAUA,GAAG,kBAGnD,cAAChF,EAAD,IACA,sBAAKlC,UAAU,SAAf,UACE,cAAC6F,EAAD,CACExD,OAAQgG,EACRjG,QAASwH,GACT9D,aAnJZ,SAA0B/B,GACxBoF,GAAiB,mEACjB,IAAMmB,EAAMJ,aAAaK,QAAQ,OACjCxH,EACG0I,eAAe1H,EAAKuG,GACpBzG,MAAK,SAACE,GACLqE,EAAerE,GACf6F,KACAT,GAAiB,OAElBwB,OAAM,SAACC,GACNd,GAAiBc,OAyIX7E,aAAcmD,KAGhB,cAACxC,EAAD,CACErE,OAAQkG,EACRnG,QAASwH,GACTjI,WA5HZ,SAA8BoC,GAC5BoF,GAAiB,mEACjB,IAAMmB,EAAMJ,aAAaK,QAAQ,OACjCxH,EACG2I,WAAW3H,EAAMuG,GACjBzG,MAAK,SAACsH,GACL/B,GAAS,CAAC+B,GAAF,mBAAcrJ,MACtB8H,KACAT,GAAiB,OAElBwB,OAAM,SAACC,GACNd,GAAiBc,OAkHX7E,aAAcmD,KAGhB,cAACtG,EAAD,CACEtC,KAAMyI,EACN3G,QAASwH,GACTvH,OAAQwG,IAGV,cAAClC,EAAD,CACEvE,QAASwH,GACTvH,OAAQsG,EACR/B,WAAYA,GACZnG,aAxLZ,SAA0BH,GACxB6I,GAAiB,uDACjB,IAAMmB,EAAMJ,aAAaK,QAAQ,OACjCxH,EACG4I,WAAWrL,EAAKQ,IAAKwJ,GACrBzG,MAAK,WACJuF,IAAS,SAACgC,GAAD,OAAWA,EAAMQ,QAAO,SAACzK,GAAD,OAAOA,EAAEL,MAAQR,EAAKQ,UACvD8I,KACAP,GAAc,CAAE9H,KAAM,GAAID,KAAM,KAChC6H,GAAiB,OAElBwB,OAAM,SAACC,GACNd,GAAiBc,OA6KX7E,aAAcmD,KAGhB,cAAC1C,EAAD,CACEnE,OAAQoG,EACRrG,QAASwH,GACTnD,eAhKZ,SAA4B1C,GAC1BoF,GAAiB,mEACjB,IAAMmB,EAAMJ,aAAaK,QAAQ,OACjCxH,EACG8I,iBAAiB9H,EAAKuG,GACtBzG,MAAK,SAACE,GACLqE,EAAerE,GACf6F,KACAT,GAAiB,OAElBwB,OAAM,SAACC,GACNd,GAAiBc,OAsJX7E,aAAcmD,KAGhB,cAACzB,EAAD,CACErF,QAASwH,GACTlC,eAAgBA,GAChBrF,OAAQkH,GACRhI,KAAK,kBAGP,cAACsG,EAAD,CAAmBC,aAAcA,eClW7C,IAYegE,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBnI,MAAK,YAAkD,IAA/CoI,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAACzE,EAAD,QAGJ8C,SAAS4B,eAAe,SAG1BX,M","file":"static/js/main.aa7f7a62.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default function Header({ userEmail, headerLinkName, onSignOut }) {\r\n  const [visibleHeaderMenu, setVisibleHeaderMenu] = React.useState(false);\r\n\r\n  function handleClickMenu() {\r\n    setVisibleHeaderMenu(!visibleHeaderMenu);\r\n  }\r\n\r\n  function handleSignOut() {\r\n    setVisibleHeaderMenu(false);\r\n    onSignOut();\r\n  }\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__logo\"></div>\r\n      <div\r\n        className={` header__menu ${\r\n          userEmail ? \"header__menu_type_sign-in\" : \"\"\r\n        } ${visibleHeaderMenu ? \"header__menu_type_active\" : \"\"}`}\r\n        onClick={handleClickMenu}\r\n      ></div>\r\n      <div\r\n        className={` header__account-menu ${\r\n          userEmail ? \"header__account-menu_type_sign-in\" : \"\"\r\n        } ${visibleHeaderMenu ? \"header__account-menu_type_visible\" : \"\"}`}\r\n      >\r\n        <div className=\"header__wrapper-user-email\">\r\n          <p\r\n            className={` header__user-email ${\r\n              userEmail ? \"header__user-email_type_sign-in\" : \"\"\r\n            }`}\r\n          >\r\n            {userEmail}\r\n          </p>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          className={` header__button ${\r\n            userEmail ? \"header__button_type_sign-in\" : \"\"\r\n          }`}\r\n          onClick={handleSignOut}\r\n        >\r\n          {headerLinkName}\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import  React, { useContext } from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const isOwn = card.owner === currentUser._id;\r\n  const cardDeleteButtonClassName = ` ${isOwn ? \"card__delete\" : \"\"} `;\r\n  const isLiked = card.likes.some((i) => i === currentUser._id);\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"card\">\r\n      <div\r\n        className=\"card__place\"\r\n        style={{ backgroundImage: `url(${card.link})` }}\r\n        onClick={handleClick}\r\n      ></div>\r\n      <h2 className=\"card__title\">{card.name}</h2>\r\n      <button\r\n        onClick={handleLikeClick}\r\n        type=\"button\"\r\n        aria-label=\"like toggle\"\r\n        className={`  card__like  ${isLiked ? \"card__like_active\" : \"\"}  `}\r\n      >\r\n        <p className=\"card__likes-counter\">{card.likes.length}</p>\r\n      </button>\r\n      <div\r\n        onClick={handleDeleteClick}\r\n        className={cardDeleteButtonClassName}\r\n      ></div>\r\n    </li>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Main({\r\n  onCardClick,\r\n  onAddPlace,\r\n  onEditProfile,\r\n  onEditAvatar,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"edit avatar image\"\r\n          className=\"profile__avatar\"\r\n          onClick={onEditAvatar}\r\n          style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n        ></button>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"edit profile\"\r\n            className=\"profile__edit-button\"\r\n            onClick={onEditProfile}\r\n          ></button>\r\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"add image\"\r\n          className=\"profile__add-button\"\r\n          onClick={onAddPlace}\r\n        ></button>\r\n      </section>\r\n      <section className=\"places\">\r\n        <ul className=\"cards\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              onCardDelete={onCardDelete}\r\n              onCardLike={onCardLike}\r\n              card={card}\r\n              key={card._id}\r\n              onCardClick={onCardClick}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Popup({ onClose, name, isOpen, title='', children }) {\r\n  function handleClickOverlay(e) {\r\n    if (e.target.classList.contains(\"popup\") && onClose) onClose();\r\n  }\r\n\r\n  return (\r\n    <div\r\n      onClick={handleClickOverlay}\r\n      className={`popup popup_type_${name} ${isOpen ? \"visible-block\" : \"\"} `}\r\n    >\r\n      <div className={`popup__container popup__container_type_${name}`}>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"close popup\"\r\n          className={`popup__close popup__close_type_${name}`}\r\n          onClick={onClose}\r\n        ></button>\r\n        <h3 className={`popup__title popup__title_type_${name}`}>{title}</h3>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function ImagePopup({ card, onClose, isOpen }) {\r\n  return (\r\n    <Popup name=\"fullscreen\" isOpen={isOpen} onClose={onClose}>\r\n      <figure className=\"popup__fullscreen-figure\">\r\n        <img\r\n          src={`${card.link}`}\r\n          alt={card.name}\r\n          className=\"popup__fullscreen-image\"\r\n        />\r\n        <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n      </figure>\r\n    </Popup>\r\n  );\r\n}\r\n","class Api {\r\n  constructor({ baseUrl }) {\r\n    this._baseUrl = baseUrl;\r\n  }\r\n\r\n  _checkStatus(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status} ${res.statusText}`);\r\n  }\r\n\r\n  getUserInfo(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n  getInitialCards(token) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n  updateDataUser(data, token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify(data),\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n  addNewCard(data, token) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify(data),\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n  deleteCard(id, token) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n  updateUserAvatar(data, token) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify(data),\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n  likeCard(method, id, token) {\r\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\r\n      method: method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'authorization': `Bearer ${token}`\r\n      },\r\n    }).then((res) => {\r\n      return this._checkStatus(res);\r\n    });\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: \"https://api.mesto-full.nomoredomains.work\",\r\n});\r\n\r\nexport default api;\r\n","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function PopupWithForm({\r\n  name,\r\n  title,\r\n  isOpen,\r\n  onClose,\r\n  children,\r\n  isDisabled = false,\r\n  buttonText,\r\n  onSubmit,\r\n}) {\r\n  return (\r\n    <Popup onClose={onClose} name={name} isOpen={isOpen} title={title}>\r\n      <form\r\n        onSubmit={onSubmit}\r\n        noValidate\r\n        action=\"#\"\r\n        name={name}\r\n        className={`popup__form popup__form_type_${name}`}\r\n        method=\"POST\"\r\n      >\r\n        {children}\r\n        <button\r\n          disabled={isDisabled}\r\n          aria-label=\"submit form\"\r\n          className={`popup__button-submit ${\r\n            isDisabled ? \"popup__button-submit_disabled\" : \"\"\r\n          } popup__button-submit_type_${name}`}\r\n          type=\"submit\"\r\n        >\r\n          {buttonText}\r\n        </button>\r\n      </form>\r\n    </Popup>\r\n  );\r\n}\r\n","import { useState, useCallback } from \"react\";\r\n\r\nexport default function useFormValidator() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: e.target.validationMessage });\r\n    setIsValid(e.target.closest(\"form\").checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return {\r\n    values,\r\n    handleChange,\r\n    errors,\r\n    isValid,\r\n    resetForm,\r\n    setValues,\r\n    setIsValid,\r\n  };\r\n}\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport useFormValidator from \"../hooks/useFormValidator\";\r\n\r\nexport default function EditProfilePopup({\r\n  onUpdateUser,\r\n  isOpen,\r\n  onClose,\r\n  sendingState,\r\n}) {\r\n  const currentFormValidator = useFormValidator();\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  useEffect(() => {\r\n    if (currentUser.name) {\r\n      currentFormValidator.resetForm();\r\n      currentFormValidator.setValues({\r\n        ...currentFormValidator.values,\r\n        name: currentUser.name,\r\n        about: currentUser.about,\r\n      });\r\n      currentFormValidator.setIsValid(true);\r\n    }\r\n  }, [currentUser, isOpen]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({\r\n      name: currentFormValidator.values.name,\r\n      about: currentFormValidator.values.about,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"edit-profile\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      buttonText={` ${sendingState ? sendingState : \"Сохранить\"} `}\r\n      isDisabled={!currentFormValidator.isValid}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          value={currentFormValidator.values.name || \"\"}\r\n          onChange={currentFormValidator.handleChange}\r\n          id=\"name-input-edit\"\r\n          required\r\n          name=\"name\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          placeholder=\"Имя\"\r\n          className={` popup__input ${\r\n            currentFormValidator.errors.name ? \"popup__input_type_error\" : \"\"\r\n          }`}\r\n          type=\"text\"\r\n        />\r\n        <span className=\"popup__input-error name-input-edit-error\">\r\n          {currentFormValidator.errors.name}\r\n        </span>\r\n      </label>\r\n      <label className=\"popup__field\">\r\n        <input\r\n          value={currentFormValidator.values.about || \"\"}\r\n          onChange={currentFormValidator.handleChange}\r\n          id=\"job-input\"\r\n          required\r\n          name=\"about\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          placeholder=\"О себе\"\r\n          className={` popup__input ${\r\n            currentFormValidator.errors.about ? \"popup__input_type_error\" : \"\"\r\n          }`}\r\n          type=\"text\"\r\n        />\r\n        <span className=\"popup__input-error job-input-error\">\r\n          {currentFormValidator.errors.about}\r\n        </span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport useFormValidator from \"../hooks/useFormValidator\";\r\n\r\nexport default function EditAvatarPopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateAvatar,\r\n  sendingState,\r\n}) {\r\n  const currentFormValidator = useFormValidator();\r\n\r\n  useEffect(() => {\r\n    currentFormValidator.resetForm();\r\n  }, [isOpen]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: currentFormValidator.values.link,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"update-avatar\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      buttonText={` ${sendingState ? sendingState : \"Сохранить\"} `}\r\n      isDisabled={!currentFormValidator.isValid}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          value={currentFormValidator.values.link || \"\"}\r\n          onChange={currentFormValidator.handleChange}\r\n          id=\"link-input-avatar\"\r\n          type=\"url\"\r\n          required\r\n          name=\"link\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          className={` popup__input ${\r\n            currentFormValidator.errors.link ? \"popup__input_type_error\" : \"\"\r\n          }`}\r\n        />\r\n        <span className=\"popup__input-error link-input-avatar-error\">\r\n          {currentFormValidator.errors.link}\r\n        </span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import  React, { useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport useFormValidator from \"../hooks/useFormValidator\";\r\n\r\nexport default function AddPlacePopup({\r\n  isOpen,\r\n  onClose,\r\n  onAddPlace,\r\n  sendingState,\r\n}) {\r\n  const currentFormValidator = useFormValidator();\r\n\r\n  useEffect(() => {\r\n    currentFormValidator.resetForm();\r\n  }, [isOpen]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({\r\n      name: currentFormValidator.values.name,\r\n      link: currentFormValidator.values.link,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add-card\"\r\n      title=\"Новое место\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      buttonText={` ${sendingState ? sendingState : \"Создать\"} `}\r\n      isDisabled={!currentFormValidator.isValid}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input\r\n          value={currentFormValidator.values.name || \"\"}\r\n          onChange={currentFormValidator.handleChange}\r\n          id=\"name-input-add\"\r\n          required\r\n          name=\"name\"\r\n          minLength=\"2\"\r\n          maxLength=\"30\"\r\n          placeholder=\"Название\"\r\n          className={` popup__input ${\r\n            currentFormValidator.errors.name ? \"popup__input_type_error\" : \"\"\r\n          }`}\r\n          type=\"text\"\r\n        />\r\n        <span className=\"popup__input-error name-input-add-error\">\r\n          {currentFormValidator.errors.name}\r\n        </span>\r\n      </label>\r\n      <label className=\"popup__field\">\r\n        <input\r\n          value={currentFormValidator.values.link || \"\"}\r\n          onChange={currentFormValidator.handleChange}\r\n          id=\"link-input\"\r\n          type=\"url\"\r\n          required\r\n          name=\"link\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          className={` popup__input ${\r\n            currentFormValidator.errors.link ? \"popup__input_type_error\" : \"\"\r\n          }`}\r\n        />\r\n        <span className=\"popup__input-error name-input-add-error\">\r\n          {currentFormValidator.errors.link}\r\n        </span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function DeleteCardPopup({\r\n  isOpen,\r\n  onClose,\r\n  cardDelete,\r\n  onCardDelete,\r\n  sendingState,\r\n}) {\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onCardDelete(cardDelete);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"delete-card\"\r\n      title=\"Вы уверены?\"\r\n      onClose={onClose}\r\n      buttonText={` ${sendingState ? sendingState : \"Да\"} `}\r\n      isOpen={isOpen}\r\n      onSubmit={handleSubmit}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from \"react\";\r\nimport useFormValidator from \"../hooks/useFormValidator\";\r\n\r\nexport default function Login({ onLogin }) {\r\n  const currentFormValidator = useFormValidator();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onLogin(\r\n      currentFormValidator.values.email,\r\n      currentFormValidator.values.password\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"entry\">\r\n      <h2 className=\"entry__title\">Вход</h2>\r\n      <form\r\n        className=\"entry__form\"\r\n        noValidate\r\n        action=\"#\"\r\n        method=\"POST\"\r\n        name=\"login\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <label className=\"entry__field\">\r\n          <input\r\n            id=\"entry-input-email\"\r\n            required\r\n            name=\"email\"\r\n            minLength=\"5\"\r\n            maxLength=\"40\"\r\n            placeholder=\"Email\"\r\n            className={` entry__input ${\r\n              currentFormValidator.errors.email ? \"entry__input_type_error\" : \"\"\r\n            }`}\r\n            type=\"email\"\r\n            value={currentFormValidator.values.email || \"\"}\r\n            onChange={currentFormValidator.handleChange}\r\n          />\r\n          <span className=\"entry__input-error entry-input-email-error\">\r\n            {currentFormValidator.errors.email}\r\n          </span>\r\n        </label>\r\n        <label className=\"entry__field\">\r\n          <input\r\n            id=\"entry-input-password\"\r\n            required\r\n            name=\"password\"\r\n            minLength=\"5\"\r\n            maxLength=\"40\"\r\n            placeholder=\"Пароль\"\r\n            className={` entry__input ${\r\n              currentFormValidator.errors.password\r\n                ? \"entry__input_type_error\"\r\n                : \"\"\r\n            }`}\r\n            type=\"password\"\r\n            value={currentFormValidator.values.password || \"\"}\r\n            onChange={currentFormValidator.handleChange}\r\n          />\r\n          <span className=\"entry__input-error entry-input-email-error\">\r\n            {currentFormValidator.errors.password}\r\n          </span>\r\n        </label>\r\n        <button\r\n          aria-label=\"submit form\"\r\n          className={` entry__button-submit ${\r\n            !currentFormValidator.isValid ? \"entry__button-submit_disabled\" : \"\"\r\n          } `}\r\n          type=\"submit\"\r\n          disabled={!currentFormValidator.isValid}\r\n        >\r\n          Войти\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useFormValidator from \"../hooks/useFormValidator\";\r\n\r\nexport default function Register({ onSignOut, onRegister }) {\r\n  const currentFormValidator = useFormValidator();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onRegister(\r\n      currentFormValidator.values.email,\r\n      currentFormValidator.values.password\r\n    );\r\n  } \r\n\r\n  return (\r\n    <div className=\"entry\">\r\n      <h2 className=\"entry__title\">Регистрация</h2>\r\n      <form\r\n        className=\"entry__form\"\r\n        noValidate\r\n        action=\"#\"\r\n        method=\"POST\"\r\n        name=\"register\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <label className=\"entry__field\">\r\n          <input\r\n            id=\"entry-input-email\"\r\n            required\r\n            name=\"email\"\r\n            minLength=\"5\"\r\n            maxLength=\"40\"\r\n            placeholder=\"Email\"\r\n            className={` entry__input ${\r\n              currentFormValidator.errors.email ? \"entry__input_type_error\" : \"\"\r\n            }`}\r\n            type=\"email\"\r\n            value={currentFormValidator.values.email || \"\"}\r\n            onChange={currentFormValidator.handleChange}\r\n          />\r\n          <span className=\"entry__input-error entry-input-email-error\">\r\n            {currentFormValidator.errors.email}\r\n          </span>\r\n        </label>\r\n        <label className=\"entry__field\">\r\n          <input\r\n            id=\"entry-input-password\"\r\n            required\r\n            name=\"password\"\r\n            minLength=\"5\"\r\n            maxLength=\"40\"\r\n            placeholder=\"Пароль\"\r\n            className={` entry__input ${\r\n              currentFormValidator.errors.password\r\n                ? \"entry__input_type_error\"\r\n                : \"\"\r\n            }`}\r\n            type=\"password\"\r\n            value={currentFormValidator.values.password || \"\"}\r\n            onChange={currentFormValidator.handleChange}\r\n          />\r\n          <span className=\"entry__input-error entry-input-email-error\">\r\n            {currentFormValidator.errors.password}\r\n          </span>\r\n        </label>\r\n        <button\r\n          aria-label=\"submit form\"\r\n          className={` entry__button-submit ${\r\n            !currentFormValidator.isValid ? \"entry__button-submit_disabled\" : \"\"\r\n          } `}\r\n          type=\"submit\"\r\n          disabled={!currentFormValidator.isValid}\r\n        >\r\n          Зарегистрироваться\r\n        </button>\r\n        <Link className=\"entry__link\" to=\"/sign-in\" onClick={onSignOut}>\r\n          Уже зарегистрированы? Войти\r\n        </Link>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function InfoTooltip({ onClose, statusRegister, isOpen, name }) {\r\n  return (\r\n    <Popup\r\n      onClose={onClose}\r\n      name={name}\r\n      isOpen={isOpen}\r\n      title={\r\n        statusRegister\r\n          ? \"Вы успешно зарегистрировались!\"\r\n          : \"Что-то пошло не так! Попробуйте ещё раз.\"\r\n      }\r\n    >\r\n      <div\r\n        className={`popup__image popup__image_type_${\r\n          statusRegister ? \"success\" : \"failure\"\r\n        }`}\r\n      ></div>\r\n    </Popup>\r\n  );\r\n}\r\n","const BASE_URL = \"https://api.mesto-full.nomoredomains.work\";\r\n\r\nconst headers = {\r\n  \"Content-Type\": \"application/json\",\r\n};\r\n\r\nconst checkStatus = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status} ${res.statusText}`);\r\n};\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers,\r\n    body: JSON.stringify({ email, password }),\r\n  }).then((res) => {\r\n    return checkStatus(res);\r\n  });\r\n};\r\n\r\nexport const login = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers,\r\n    body: JSON.stringify({ email, password }),\r\n  }).then((res) => {\r\n    return checkStatus(res);\r\n  });\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      ...headers,\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  }).then((res) => {\r\n    return checkStatus(res);\r\n  });\r\n};\r\n","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function ErrorMessagePopup({ errorMessage }) {\r\n  return (\r\n    <Popup name=\"error-message\" isOpen={errorMessage} title={errorMessage} />\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport api from \"../utils/api\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport DeleteCardPopup from \"./DeleteCardPopup\";\r\nimport {\r\n  Redirect,\r\n  Route,\r\n  Switch,\r\n  useHistory,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport { register, login, getContent } from \"../utils/auth\";\r\nimport ErrorMessagePopup from \"./ErrorMessagePopup\";\r\n\r\nexport default function App() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [visiblePopupEditProfile, setVisiblePopupEditProfile] = useState(false);\r\n  const [visiblePopupAddPlace, setVisiblePopupAddPlace] = useState(false);\r\n  const [visiblePopupEditAvatar, setVisiblePopupEditAvatar] = useState(false);\r\n  const [visiblePopupDeleteCard, setVisiblePopupDeleteCard] = useState(false);\r\n  const [visiblePopupImageFullscreen, setVisiblePopupImageFullscreen] =\r\n    useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({\r\n    name: \"\",\r\n    link: \"\",\r\n  });\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [sendingStatus, setSendingStatus] = useState(\"\");\r\n  const [cards, setCards] = useState([]);\r\n  const [cardDelete, setCardDelete] = useState({ name: \"\", link: \"\" });\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [visiblePopupInfoTooltip, setVisiblePopupInfoTooltip] = useState(false);\r\n  const [statusRegister, setStatusRegister] = useState(false);\r\n  const [userEmail, setUserEmail] = useState(\"\");\r\n  const [headerLinkName, setHeaderLinkName] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (location.pathname === \"/sign-in\") {\r\n      setHeaderLinkName(\"Регистрация\");\r\n    }\r\n    if (location.pathname === \"/sign-up\") {\r\n      setHeaderLinkName(\"Войти\");\r\n    }\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    if (jwt) {\r\n      getContent(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setUserEmail(res.email);\r\n            setLoggedIn(true);\r\n            history.push(\"/\");\r\n            setHeaderLinkName(\"Выйти\");\r\n            api\r\n            .getUserInfo(jwt)\r\n            .then((data) => {\r\n              setCurrentUser(data);\r\n              api\r\n              .getInitialCards(jwt)\r\n              .then((data) => {\r\n                setCards(data);\r\n              })\r\n              .catch((err) => {\r\n                showErrorMessage(err);\r\n              });\r\n            })\r\n            .catch((err) => {\r\n              showErrorMessage(err);\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          showErrorMessage(err);\r\n        });\r\n    }\r\n  }, [loggedIn, history]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", handleEscClose);\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  function handleEditProfileClick() {\r\n    setVisiblePopupEditProfile(!visiblePopupEditProfile);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setVisiblePopupAddPlace(!visiblePopupAddPlace);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setVisiblePopupEditAvatar(!visiblePopupEditAvatar);\r\n  }\r\n\r\n  function confirmCardDelete(card) {\r\n    setVisiblePopupDeleteCard(!visiblePopupDeleteCard);\r\n    setCardDelete(card);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    setVisiblePopupImageFullscreen(!visiblePopupImageFullscreen);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setVisiblePopupEditProfile(false);\r\n    setVisiblePopupAddPlace(false);\r\n    setVisiblePopupEditAvatar(false);\r\n    setVisiblePopupImageFullscreen(false);\r\n    setTimeout(() => {\r\n      setSelectedCard({ name: \"\", link: \"\" });\r\n    }, 1000);\r\n    setVisiblePopupDeleteCard(false);\r\n    setVisiblePopupInfoTooltip(false);\r\n  }\r\n\r\n  function showErrorMessage(error) {\r\n    setErrorMessage(error);\r\n    setTimeout(() => {\r\n      setErrorMessage(\"\");\r\n    }, 3000);\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    const isLiked = card.likes.some((i) => i === currentUser._id);\r\n    api\r\n      .likeCard(isLiked ? \"DELETE\" : \"PUT\", card._id, jwt)\r\n      .then((newCard) => {\r\n        setCards((state) =>\r\n          state.map((c) => (c._id === card._id ? newCard : c))\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    setSendingStatus(\"Удаление...\");\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    api\r\n      .deleteCard(card._id, jwt)\r\n      .then(() => {\r\n        setCards((state) => state.filter((i) => i._id !== card._id));\r\n        closeAllPopups();\r\n        setCardDelete({ name: \"\", link: \"\" });\r\n        setSendingStatus(\"\");\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n      });\r\n  }\r\n\r\n  function handleUpdateUser(data) {\r\n    setSendingStatus(\"Сохранение...\");\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    api\r\n      .updateDataUser(data,jwt)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n        setSendingStatus(\"\");\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar(data) {\r\n    setSendingStatus(\"Сохранение...\");\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    api\r\n      .updateUserAvatar(data,jwt)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n        setSendingStatus(\"\");\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n      });\r\n  }\r\n\r\n  function handleAddPlaceSubmit(data) {\r\n    setSendingStatus(\"Сохранение...\");\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    api\r\n      .addNewCard(data, jwt)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n        setSendingStatus(\"\");\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n      });\r\n  }\r\n\r\n  function handleEscClose(e) {\r\n    if (e.key === \"Escape\") {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  function onRegister(email, password) {\r\n    register(email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          setStatusRegister(true);\r\n          setVisiblePopupInfoTooltip(true);\r\n          history.push(\"/sign-in\");\r\n        } else {\r\n          setStatusRegister(false);\r\n          setVisiblePopupInfoTooltip(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n        setStatusRegister(false);\r\n        setVisiblePopupInfoTooltip(true);\r\n      });\r\n  }\r\n\r\n  function onLogin(email, password) {\r\n    login(email, password)\r\n      .then((data) => {\r\n        if (!data) {\r\n          setStatusRegister(false);\r\n          setVisiblePopupInfoTooltip(true);\r\n          return;\r\n        }\r\n        if (data.token) {\r\n          localStorage.setItem(\"jwt\", data.token);\r\n          setUserEmail(email);\r\n          setLoggedIn(true);\r\n          setHeaderLinkName(\"Выйти\");\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(err);\r\n        setStatusRegister(false);\r\n        setVisiblePopupInfoTooltip(true);\r\n      });\r\n  }\r\n\r\n  function onSignOut() {\r\n    if (headerLinkName === \"Выйти\") {\r\n      localStorage.removeItem(\"jwt\");\r\n      setLoggedIn(false);\r\n      setHeaderLinkName(\"Регистрация\");\r\n      setUserEmail(\"\");\r\n      history.push(\"/sign-in\");\r\n    }\r\n    if (headerLinkName === \"Регистрация\") {\r\n      history.push(\"/sign-up\");\r\n    }\r\n    if (headerLinkName === \"Войти\") {\r\n      history.push(\"/sign-in\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <div className=\"page-content\">\r\n          <Header\r\n            userEmail={userEmail}\r\n            headerLinkName={headerLinkName}\r\n            onSignOut={onSignOut}\r\n          />\r\n          <Switch>\r\n            <ProtectedRoute\r\n              exact\r\n              path=\"/\"\r\n              loggedIn={loggedIn}\r\n              component={Main}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              cards={cards}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={confirmCardDelete}\r\n            />\r\n            <Route path=\"/sign-in\">\r\n              <Login onLogin={onLogin} />\r\n            </Route>\r\n            <Route path=\"/sign-up\">\r\n              <Register onRegister={onRegister} onSignOut={onSignOut} />\r\n            </Route>\r\n            <Route path=\"/\">\r\n              {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\r\n            </Route>\r\n          </Switch>\r\n          <Footer />\r\n          <div className=\"popups\">\r\n            <EditProfilePopup\r\n              isOpen={visiblePopupEditProfile}\r\n              onClose={closeAllPopups}\r\n              onUpdateUser={handleUpdateUser}\r\n              sendingState={sendingStatus}\r\n            />\r\n\r\n            <AddPlacePopup\r\n              isOpen={visiblePopupAddPlace}\r\n              onClose={closeAllPopups}\r\n              onAddPlace={handleAddPlaceSubmit}\r\n              sendingState={sendingStatus}\r\n            />\r\n\r\n            <ImagePopup\r\n              card={selectedCard}\r\n              onClose={closeAllPopups}\r\n              isOpen={visiblePopupImageFullscreen}\r\n            />\r\n\r\n            <DeleteCardPopup\r\n              onClose={closeAllPopups}\r\n              isOpen={visiblePopupDeleteCard}\r\n              cardDelete={cardDelete}\r\n              onCardDelete={handleCardDelete}\r\n              sendingState={sendingStatus}\r\n            />\r\n\r\n            <EditAvatarPopup\r\n              isOpen={visiblePopupEditAvatar}\r\n              onClose={closeAllPopups}\r\n              onUpdateAvatar={handleUpdateAvatar}\r\n              sendingState={sendingStatus}\r\n            />\r\n\r\n            <InfoTooltip\r\n              onClose={closeAllPopups}\r\n              statusRegister={statusRegister}\r\n              isOpen={visiblePopupInfoTooltip}\r\n              name=\"info-tool-tip\"\r\n            />\r\n\r\n            <ErrorMessagePopup errorMessage={errorMessage} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}