(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{18:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(20),s=n.n(i),o=(n(18),n(3)),r=n(25),u=n(2),l=n(21),d=n(22),p=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(l.a)(this,e),this._baseUrl=n,this._headers=a}return Object(d.a)(e,[{key:"_checkStatus",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," ").concat(e.statusText))}},{key:"getUserInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(e)}}).then((function(e){return t._checkStatus(e)}))}},{key:"getInitialCards",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(e)}}).then((function(e){return t._checkStatus(e)}))}},{key:"updateDataUser",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}).then((function(e){return n._checkStatus(e)}))}},{key:"addNewCard",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}).then((function(e){return n._checkStatus(e)}))}},{key:"deleteCard",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)}}).then((function(e){return n._checkStatus(e)}))}},{key:"updateUserAvatar",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}).then((function(e){return n._checkStatus(e)}))}},{key:"likeCard",value:function(e,t,n){var a=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:e,headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(n)}}).then((function(e){return a._checkStatus(e)}))}}]),e}())({baseUrl:"https://api.mesto-full.nomoredomains.work"}),j=c.a.createContext(),b=n(0),m=function(e){var t=e.onCardClick,n=e.onCardLike,c=e.onCardDelete,i=e.card,s=Object(a.useContext)(j).currentUser,o=i.likes.some((function(e){return e._id===s._id})),r=i.owner._id===s._id,u="list__like ".concat(o?"list__like_active":""),l="list__basket ".concat(r?"":"list__basket_inactive");return Object(b.jsxs)("li",{className:"list__element",children:[Object(b.jsx)("img",{src:i&&i.link,alt:i&&i.name,className:"list__image",onClick:function(){t(i)}}),Object(b.jsxs)("div",{className:"list__group",children:[Object(b.jsx)("h2",{className:"list__name",children:i&&i.name}),Object(b.jsx)("button",{className:u,type:"button","aria-label":"Like",onClick:function(){n(i)},children:Object(b.jsx)("p",{className:"list__likes-counter",children:i.likes?i.likes.length:"0"})}),Object(b.jsx)("button",{className:l,type:"button","aria-label":"delete image",onClick:function(){c(i)}})]})]})},h=n.p+"static/media/header-logo.bbe2a6ea.svg",O=n(9),f=function(e){var t=e.buttonText,n=e.userEmail,c=e.endPoint,i=e.signOut,s=Object(a.useContext)(j),o=s.isBurgerMenuOpen,r=s.setIsBurgerMenuOpen;return Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)(O.c,{to:"/main",className:"logo",children:Object(b.jsx)("img",{src:h,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"})}),Object(b.jsx)("div",{className:"header__burger ".concat(o?"active":""),onClick:function(){o?(r(!1),console.log(o)):(r(!0),console.log(o))},children:Object(b.jsx)("span",{className:"header__burger_span ".concat(o?"active":"")})}),Object(b.jsxs)("div",{className:"header__menu ".concat(o?"active":""),children:[n&&Object(b.jsx)("p",{className:"header__item ".concat(o?"active":""),children:n}),Object(b.jsx)("p",{className:"header__item ".concat(o?"active":""),children:Object(b.jsx)(O.c,{className:"header__link",to:c,onClick:i,children:t})})]})]})},_=function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("p",{className:"footer__text",children:"\xa9 2020 Mesto Russia"})})};var g=function(e){var t=e.onAddPlace,n=e.onCardClick,c=e.onEditAvatar,i=e.onEditProfile,s=e.cards,o=e.onLikeClick,r=e.onDeleteClick,u=e.signOut,l=e.userEmail,d=Object(a.useContext)(j).currentUser;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{userEmail:l,buttonText:"\u0412\u044b\u0439\u0442\u0438",endPoint:"/sign-in",signOut:u}),Object(b.jsxs)("main",{className:"content",children:[Object(b.jsxs)("section",{className:"profile",children:[Object(b.jsx)("button",{type:"button","aria-label":"profile__avatar",className:"profile__avatar",style:{backgroundImage:"url(".concat(d.avatar,")")},onClick:c}),Object(b.jsxs)("div",{className:"profile-info",children:[Object(b.jsx)("h1",{className:"profile-info__name",id:"name",children:d.name}),Object(b.jsx)("button",{className:"profile-info__edit",type:"button","aria-label":"Edit",onClick:i}),Object(b.jsx)("p",{className:"profile-info__text",id:"job",children:d.about})]}),Object(b.jsx)("button",{type:"button",className:"profile__add","aria-label":"add profile",onClick:t})]}),Object(b.jsx)("section",{className:"elements",children:Object(b.jsx)("ul",{className:"list",children:s.map((function(e){return Object(b.jsx)(m,{card:e,onCardClick:n,onCardLike:o,onCardDelete:r},e._id)}))})})]}),Object(b.jsx)(_,{})]})},x=function(e){var t=e.isOpen,n=e.onClose,a=e.data;return Object(b.jsx)("div",{className:"popup popup_type_image ".concat(t?"popup_is-opened":""),children:Object(b.jsxs)("div",{className:"popup__content popup__content_image",id:"picture-popup",onClick:n,children:[Object(b.jsx)("button",{className:"popup__close",type:"button","aria-label":"close popupImage",onClick:n}),Object(b.jsx)("img",{src:a&&a.link,alt:a&&a.name,className:"popup__imgPic"}),Object(b.jsx)("h3",{className:"popup__imgText",children:a&&a.name})]})})};var v=function(e){var t=e.name,n=e.title,a=e.isOpen,c=e.onClose,i=e.onSubmit,s=e.children,o=e.button,r=e.idSubmitted;return Object(b.jsx)("div",{className:"popup ".concat(a?"popup_is-opened":""),id:"edit-".concat(t),onClick:c,children:Object(b.jsxs)("div",{className:"popup__content",children:[Object(b.jsx)("button",{type:"button","aria-label":"close popup",className:"popup__close",onClick:c}),Object(b.jsx)("h3",{className:"popup__title",children:n}),Object(b.jsxs)("form",{action:"#",id:"".concat(t),name:"".concat(t),className:"popup__form",onSubmit:i,children:[s,Object(b.jsx)("button",{"aria-label":"submit form",className:"popup__submit popup__submit_disabled",type:"submit",disabled:r,children:o})]})]})})},C=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,i=e.isSubmitted,s=Object(a.useRef)("");return Object(b.jsx)(v,{name:"user-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",button:i?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),i||(c({avatar:s.current.value}),s.current.value="")},idSubmitted:i,children:Object(b.jsxs)("label",{className:"popup__field",htmlFor:"avatar-link-input",children:[Object(b.jsx)("input",{ref:s,type:"url",className:"popup__input",id:"avatar-link-input",name:"avatarLinkInput",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",required:!0}),Object(b.jsx)("span",{className:"form__input-error",id:"avatar-link-input-error"})]})})},S=function(e){return Object(b.jsxs)("label",{className:"popup__field",htmlFor:"".concat(e.id,"-input"),children:[Object(b.jsx)("input",Object(o.a)(Object(o.a)({},e),{},{className:"popup__input",id:"".concat(e.id,"-input")})),Object(b.jsx)("span",{className:"popup__input-error",id:"".concat(e.id,"-input-error")})]})},k=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,i=e.isSubmitted,s=Object(a.useContext)(j).currentUser,o=Object(a.useState)(""),r=Object(u.a)(o,2),l=r[0],d=r[1],p=Object(a.useState)(""),m=Object(u.a)(p,2),h=m[0],O=m[1];Object(a.useEffect)((function(){d(s.name),O(s.about)}),[s,t]);return Object(b.jsxs)(v,{name:"user-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",button:i?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),i||c({name:l,about:h})},idSubmitted:i,children:[Object(b.jsx)(S,{type:"text",value:l||"",id:"user-name",name:"userNameInput",placeholder:"\u0418\u043c\u044f",required:!0,maxLength:"40",minLength:"2",onChange:function(e){d(e.target.value)}}),Object(b.jsx)(S,{type:"text",value:h||"",id:"user-job",name:"userNameInput",placeholder:"\u041e \u0441\u0435\u0431\u0435",required:!0,maxLength:"200",minLength:"2",onChange:function(e){O(e.target.value)}})]})},N=function(e){var t=e.isOpen,n=e.onClose,c=e.onAddPlace,i=e.isSubmitted,s=Object(a.useState)(""),o=Object(u.a)(s,2),r=o[0],l=o[1],d=Object(a.useState)(""),p=Object(u.a)(d,2),j=p[0],m=p[1];Object(a.useEffect)((function(){i||(l(""),m(""))}),[i]);return Object(b.jsxs)(v,{name:"user-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),i||c({name:r,link:j})},idSubmitted:i,children:[Object(b.jsx)(S,{type:"text",value:r||"",id:"place-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",name:"placeNameInput",required:!0,maxLength:"30",minLength:"2",onChange:function(e){l(e.target.value)}}),Object(b.jsx)(S,{type:"url",value:j||"",id:"place-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",name:"placeLinkInput",required:!0,onChange:function(e){m(e.target.value)}})]})},y=function(e){var t=e.isOpen,n=e.onClose,a=e.deleteCard,c=e.isSubmitted,i=e.data;return Object(b.jsx)(v,{name:"user-submit",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",button:c?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435":"\u0414\u0430",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c||a(i)},idSubmitted:c})},w=n(4),T=n(11),U=function(e){var t=e.name,n=e.title,a=e.onSubmit,c=e.children,i=e.button,s=e.isSubmitted,o=e.userSignUp;return Object(b.jsxs)("div",{className:"login",children:[Object(b.jsx)("h2",{className:"login__title",children:n}),Object(b.jsxs)("form",{className:"login__form",id:"".concat(t),name:"".concat(t),autoComplete:"off",onSubmit:a,children:[c,Object(b.jsx)("button",{"arial-lable":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",type:"submit",className:"login__submit ".concat(s?"login__submit_inactive":""),disabled:s,children:i}),o&&Object(b.jsx)("div",{className:"login__footer",children:Object(b.jsxs)("p",{className:"login__subtitle",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(b.jsx)(O.b,{className:"login__subtitle login__link",to:"/sign-in",children:o})]})})]})]})},P=function(e){var t=e.onLogin,n=e.isSubmitted,c=Object(a.useState)({email:"",password:""}),i=Object(u.a)(c,2),s=i[0],r=i[1],l=function(e){var t=e.target,n=t.name,a=t.value;r(Object(o.a)(Object(o.a)({},s),{},Object(T.a)({},n,a)))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{buttonText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",endPoint:"/sign-up"}),Object(b.jsxs)(U,{name:"user-sign-in",title:"\u0412\u043e\u0439\u0442\u0438",button:n?"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0432\u0445\u043e\u0434":"\u0412\u043e\u0439\u0442\u0438",onSubmit:function(e){e.preventDefault(),s.email&&s.password&&t(s.password,s.email)},isSubmitted:n,children:[Object(b.jsx)("input",{className:"login__input",type:"email",value:s.email,id:"email",placeholder:"Email",name:"email",required:!0,onChange:l}),Object(b.jsx)("input",{className:"login__input",type:"password",value:s.password,id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",required:!0,onChange:l})]})]})},L=function(e){var t=e.handleRegister,n=e.isSubmitted,c=Object(a.useState)({email:"",password:"",confirmPassword:""}),i=Object(u.a)(c,2),s=i[0],r=i[1],l=function(e){var t=e.target,n=t.name,a=t.value;r(Object(o.a)(Object(o.a)({},s),{},Object(T.a)({},n,a)))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{mix:"page__header section",buttonText:"\u0412\u043e\u0439\u0442\u0438",endPoint:"/sign-in"}),Object(b.jsxs)(U,{name:"user-sign-up",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",button:n?"\u0418\u0434\u0435\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onSubmit:function(e){e.preventDefault(),s.password&&s.email&&t(s.email,s.password,s.confirmPassword)},userSignUp:"\u0412\u043e\u0439\u0442\u0438",isSubmitted:n,children:[Object(b.jsx)("input",{className:"login__input",type:"email",value:s.email,id:"email",name:"email",placeholder:"Email",colormodifier:"form__login-input",required:!0,minLength:"2",onChange:l}),Object(b.jsx)("input",{className:"login__input",type:"password",value:s.password,id:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",colormodifier:"form__login-input",required:!0,onChange:l}),Object(b.jsx)("input",{className:"login__input",type:"password",value:s.confirmPassword,id:"confirmPassword",name:"confirmPassword",placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",colormodifier:"form__login-input",required:!0,onChange:l})]})]})},E=n(26),I=["component"],D=function(e){var t=e.component,n=Object(E.a)(e,I),c=Object(a.useContext)(j).isLoggedIn;return Object(b.jsx)(w.b,{children:function(){return c?Object(b.jsx)(t,Object(o.a)({},n)):Object(b.jsx)(w.a,{to:n.to})}})},A=function(e){var t=e.isOpen,n=e.onClose,c=e.name,i=Object(a.useContext)(j),s=i.authUserData,o=i.isSignedUp;return Object(b.jsx)("section",{className:"popup ".concat(t?"popup_is-opened":""),id:"edit-".concat(c),onClick:n,children:Object(b.jsxs)("div",{className:"popup__content popup__content_size-s",children:[Object(b.jsx)("div",{className:"popup__icon ".concat(o?"popup__icon_status_ok":"popup__icon_status_err")}),Object(b.jsx)("h2",{className:"popup__title",children:s.message}),Object(b.jsx)("button",{"arial-lable":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443 \u0431\u0435\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445",tittle:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",type:"button",className:"popup__close",onClick:n})]})})},B="https://api.mesto-full.nomoredomains.work",q={"Content-Type":"application/json"},z=function(e){return e.ok?e.json():Promise.reject("".concat(e.status," ").concat(e.statusText))},F=function(e){return fetch("".concat(B,"/users/me"),{method:"GET",headers:Object(o.a)(Object(o.a)({},q),{},{Authorization:"Bearer ".concat(e)})}).then((function(e){return z(e)}))};var J=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),s=Object(u.a)(i,2),l=s[0],d=s[1],m=Object(a.useState)(!1),h=Object(u.a)(m,2),O=h[0],f=h[1],_=Object(a.useState)(!1),v=Object(u.a)(_,2),S=v[0],T=v[1],U=Object(a.useState)(!1),E=Object(u.a)(U,2),I=E[0],J=E[1],M=Object(a.useState)(!1),R=Object(u.a)(M,2),H=R[0],G=R[1],K=Object(a.useState)(null),Q=Object(u.a)(K,2),V=Q[0],W=Q[1],X=Object(a.useState)(!1),Y=Object(u.a)(X,2),Z=Y[0],$=Y[1],ee=Object(a.useState)({}),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)({}),ie=Object(u.a)(ce,2),se=ie[0],oe=ie[1],re=Object(a.useState)(!1),ue=Object(u.a)(re,2),le=ue[0],de=ue[1],pe=Object(a.useState)(!1),je=Object(u.a)(pe,2),be=je[0],me=je[1],he=Object(a.useState)(!1),Oe=Object(u.a)(he,2),fe=Oe[0],_e=Oe[1],ge=Object(a.useState)({}),xe=Object(u.a)(ge,2),ve=xe[0],Ce=xe[1],Se=Object(a.useState)({}),ke=Object(u.a)(Se,2),Ne=ke[0],ye=ke[1],we=Object(a.useState)(!1),Te=Object(u.a)(we,2),Ue=Te[0],Pe=Te[1],Le=Object(a.useState)(!1),Ee=Object(u.a)(Le,2),Ie=Ee[0],De=Ee[1],Ae=Object(a.useState)(""),Be=Object(u.a)(Ae,2),qe=(Be[0],Be[1]),ze=Object(a.useState)(!1),Fe=Object(u.a)(ze,2),Je=(Fe[0],Fe[1]),Me=Object(w.g)();function Re(e){qe(e),setTimeout((function(){qe("")}),3e3)}Object(a.useEffect)((function(){var e=localStorage.getItem("jwt");e&&F(e).then((function(t){t&&(ye(t.email),me(!0),Me.push("/"),p.getUserInfo(e).then((function(t){ae(t),p.getInitialCards(e).then((function(e){c(e)})).catch((function(e){Re(e)}))})).catch((function(e){Re(e)})))})).catch((function(e){Re(e)}))}),[be,Me]),Object(a.useEffect)((function(){He()}),[Me]);var He=function(){var e=localStorage.getItem("jwt");e&&F(e).then((function(e){var t=e.data;ye(t.email),me(!0),Me.push("/main")})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0442\u043e\u043a\u0435\u043d\u0430:".concat(e)),Me.push("/signin"),Ce(Object(o.a)(Object(o.a)({},ve),{},{message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u043f\u043e\u0434 \u0441\u0432\u043e\u0435\u0439 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u044c\u044e"})),de(!0)}))},Ge=function(e){d(!1),T(!1),f(!1),G(!1),de(!1)},Ke=function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&Ge()},Qe=function(e){27===e.keyCode&&Ge()};return Object(a.useEffect)((function(){return(l||O||S||H||I)&&document.addEventListener("keydown",Qe),function(){document.removeEventListener("keydown",Qe)}}),[l,O,S,H,I]),Object(b.jsx)(j.Provider,{value:{currentUser:ne,authUserData:ve,isLoggedIn:be,setIsShowPassword:Pe,isShowPassword:Ue,isSignedUp:fe,isBurgerMenuOpen:Ie,setIsBurgerMenuOpen:De},children:Object(b.jsxs)("div",{className:"page",children:[Object(b.jsxs)(w.d,{children:[Object(b.jsx)(D,{path:"/main",component:g,onEditProfile:function(){d(!0)},onEditAvatar:function(){T(!0)},onAddPlace:function(){f(!0)},onCardClick:function(e){G(!0),W(e)},cards:n,onLikeClick:function(e){var t=e.likes.some((function(e){return e._id===ne._id}));p.changeLikeCardStatus(e._id,!t).then((function(t){c((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 \u043b\u0430\u0439\u043a\u0430: ".concat(e.status," ").concat(e.statusText))}))},onDeleteClick:function(e){J(!0),oe(e)},signOut:function(){me(!1),localStorage.removeItem("jwt"),ye({}),Me.push("/signin")},to:"/signin",userEmail:Ne}),Object(b.jsx)(w.b,{path:"/signin",children:Object(b.jsx)(P,{onLogin:function(e,t){(function(e,t){return fetch("".concat(B,"/signin"),{method:"POST",headers:q,body:JSON.stringify({email:e,password:t})}).then((function(e){return z(e)}))})(e,t).then((function(t){if(!t)return Je(!1),void de(!0);t.token&&(localStorage.setItem("jwt",t.token),ye(e),me(!0),Me.push("/"))})).catch((function(e){Re(e),Je(!1),de(!0)}))},isSubmitted:Z})}),Object(b.jsx)(w.b,{path:"/sign-up",children:Object(b.jsx)(L,{handleRegister:function(e,t,n){t===n?($(!0),function(e,t){return fetch("".concat(B,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return z(e)}))}(t,e).then((function(e){e?(Ce(Object(o.a)(Object(o.a)({},ve),{},{message:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"})),de(!0),_e(!0),Pe(!1),Me.push("/signin")):(Ce(Object(o.a)(Object(o.a)({},ve),{},{message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."})),de(!0),_e(!1),Pe(!1),$(!1))})).catch((function(e){var t=String(e);console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ".concat(t.split(":")[1])),Ce(Object(o.a)(Object(o.a)({},ve),{},{message:"".concat(t.split(":")[1],"!")})),de(!0),_e(!1),setTimeout((function(){return $(!1)}),3e3)}))):(Ce(Object(o.a)(Object(o.a)({},ve),{},{password:"",confirmPassword:"",message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437"})),_e(!1),Pe(!1),de(!0)),setTimeout((function(){return $(!1)}),2e3)},isSubmitted:Z})}),Object(b.jsx)(w.b,{path:"/",children:be?Object(b.jsx)(w.a,{to:"/main"}):Object(b.jsx)(w.a,{to:"/signin"})})]}),Object(b.jsx)(C,{isOpen:S,onClose:Ke,onUpdateAvatar:function(e){$(!0),p.updateAvatar(e).then((function(e){ae(Object.assign(ne,{avatar:e.avatar})),T(!1),setTimeout((function(){return $(!1)}),1e3)})).catch((function(e){console.log("\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0430\u0432\u0430\u0442\u0430\u0440\u0430: ".concat(e.status," ").concat(e.statusText))}))},isSubmitted:Z}),Object(b.jsx)(k,{isOpen:l,onClose:Ke,onUpdateUser:function(e){$(!0),p.updateUserData(e).then((function(e){ae(e),d(!1),setTimeout((function(){return $(!1)}),1e3)})).catch((function(e){console.log("\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ".concat(e.status," ").concat(e.statusText))}))},isSubmitted:Z}),Object(b.jsx)(N,{isOpen:O,onClose:Ke,onAddPlace:function(e){$(!0),p.addCard(e).then((function(e){c([e].concat(Object(r.a)(n))),f(!1),setTimeout((function(){return $(!1)}),1e3)})).catch((function(e){console.log("\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ".concat(e.status," ").concat(e.statusText))}))},isSubmitted:Z}),Object(b.jsx)(x,{isOpen:H,data:V,onClose:Ke}),Object(b.jsx)(y,{isOpen:I,onClose:Ke,isSubmitted:Z,deleteCard:function(e){$(!0),p.deleteCard(e._id).then((function(){c(n.filter((function(t){return t._id!==e._id}))),J(!1),setTimeout((function(){return $(!1)}),1e3)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ".concat(e.status," ").concat(e.statusText))}))},data:se}),Object(b.jsx)(A,{isOpen:le,onClose:Ke,name:"infoToolTip"})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(O.a,{children:Object(b.jsx)(J,{})})}),document.getElementById("root")),M()}},[[37,1,2]]]);
//# sourceMappingURL=main.d9906d2e.chunk.js.map